<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trigal CRM - Sistema de Gestión de Clientes</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>Trigal CRM</span>
            </div>
            <nav class="nav-desktop">
                <a href="#dashboard" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#clientes" class="nav-link" data-section="clientes">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
                <a href="#ventas" class="nav-link" data-section="ventas">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Ventas</span>
                </a>
                <a href="#productos" class="nav-link" data-section="productos">
                    <i class="fas fa-box"></i>
                    <span>Productos</span>
                </a>
                <a href="#informes" class="nav-link" data-section="informes">
                    <i class="fas fa-chart-bar"></i>
                    <span>Informes</span>
                </a>
                <a href="#notificaciones" class="nav-link" data-section="notificaciones">
                    <i class="fas fa-bell"></i>
                    <span>Notificaciones</span>
                </a>
                <a href="#portal-cliente" class="nav-link" data-section="portal-cliente">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Portal de Cliente</span>
                </a>
                <a href="#cuentas-cobrar" class="nav-link" data-section="cuentas-cobrar">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>Cuentas por Cobrar</span>
                </a>
                <a href="#listas-precios" class="nav-link" data-section="listas-precios">
                    <i class="fas fa-tags"></i>
                    <span>Listas de Precios</span>
                </a>
                <a href="#equipo" class="nav-link" data-section="equipo">
                    <i class="fas fa-user-tie"></i>
                    <span>Equipo</span>
                </a>
            </nav>
            <div class="header-actions">
                <!-- Notificaciones -->
                <div class="notifications-container">
                    <button class="btn-notification" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notificationBadge">3</span>
                    </button>
                    <div class="notifications-dropdown" id="notificationsDropdown">
                        <div class="notifications-header">
                            <h3>Notificaciones</h3>
                            <button class="btn btn-sm btn-secondary" onclick="marcarTodasComoLeidas()">
                                Marcar como leídas
                            </button>
                        </div>
                        <div class="notifications-list" id="notificationsList">
                            <!-- Las notificaciones se cargarán dinámicamente -->
                        </div>
                        <div class="notifications-footer">
                            <a href="#notificaciones" class="btn btn-sm btn-primary" onclick="mostrarNotificacionesCompletas()">
                                Ver todas las notificaciones
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="user-profile">
                    <img src="https://via.placeholder.com/40x40/4F46E5/FFFFFF?text=U" alt="Usuario">
                    <span>Juan Pérez</span>
                </div>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <nav class="nav-mobile" id="navMobile">
        <div class="mobile-nav-header">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <span>Trigal CRM</span>
            </div>
            <button class="close-menu" id="closeMenu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-nav-links">
            <a href="#dashboard" class="mobile-nav-link active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#clientes" class="mobile-nav-link" data-section="clientes">
                <i class="fas fa-users"></i>
                <span>Clientes</span>
            </a>
            <a href="#ventas" class="mobile-nav-link" data-section="ventas">
                <i class="fas fa-shopping-cart"></i>
                <span>Ventas</span>
            </a>
            <a href="#productos" class="mobile-nav-link" data-section="productos">
                <i class="fas fa-box"></i>
                <span>Productos</span>
            </a>
            <a href="#informes" class="mobile-nav-link" data-section="informes">
                <i class="fas fa-chart-bar"></i>
                <span>Informes</span>
            </a>
            <a href="#notificaciones" class="mobile-nav-link" data-section="notificaciones">
                <i class="fas fa-bell"></i>
                <span>Notificaciones</span>
            </a>
            <a href="#portal-cliente" class="mobile-nav-link" data-section="portal-cliente">
                <i class="fas fa-shopping-cart"></i>
                <span>Portal de Cliente</span>
            </a>
            <a href="#cuentas-cobrar" class="mobile-nav-link" data-section="cuentas-cobrar">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Cuentas por Cobrar</span>
            </a>
            <a href="#listas-precios" class="mobile-nav-link" data-section="listas-precios">
                <i class="fas fa-tags"></i>
                <span>Listas de Precios</span>
            </a>
            <a href="#equipo" class="mobile-nav-link" data-section="equipo">
                <i class="fas fa-user-tie"></i>
                <span>Equipo</span>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h1>Dashboard</h1>
                <p>Resumen de actividades y métricas clave</p>
            </div>

            <!-- KPIs Cards -->
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="kpi-content">
                        <h3>Ventas Totales</h3>
                        <div class="kpi-value">€24,580</div>
                        <div class="kpi-period">
                            <span class="period active">Hoy</span>
                            <span class="period">Semana</span>
                            <span class="period">Mes</span>
                        </div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="kpi-content">
                        <h3>Nuevos Clientes</h3>
                        <div class="kpi-value">12</div>
                        <div class="kpi-change positive">+8% vs mes anterior</div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="kpi-content">
                        <h3>Pedidos Pendientes</h3>
                        <div class="kpi-value">8</div>
                        <div class="kpi-change">3 requieren atención</div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="kpi-content">
                        <h3>Productos Más Vendidos</h3>
                        <div class="kpi-value">Producto A</div>
                        <div class="kpi-change">156 unidades</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h3>Tendencias de Ventas</h3>
                    <canvas id="salesChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Distribución de Clientes</h3>
                    <canvas id="clientsChart"></canvas>
                </div>
            </div>
            
            <!-- Botón de prueba para el modal -->
            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" onclick="openPaymentModal()">
                    <i class="fas fa-credit-card"></i>
                    Procesar Pago de Prueba
                </button>
            </div>

            <!-- Quick Actions Mobile -->
            <div class="quick-actions-mobile">
                <button class="quick-action-btn" onclick="openPaymentModal()">
                    <i class="fas fa-credit-card"></i>
                    <span>Procesar Pago</span>
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-plus"></i>
                    <span>Nuevo Pedido</span>
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-user-plus"></i>
                    <span>Nuevo Cliente</span>
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-users"></i>
                    <span>Ver Clientes</span>
                </button>
            </div>
        </section>

        <!-- Clientes Section -->
        <section id="clientes" class="section">
            <div class="section-header">
                <h1>Gestión de Clientes</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevoCliente">
                        <i class="fas fa-plus"></i>
                        Nuevo Cliente
                    </button>
                </div>
            </div>

            <div class="search-filters">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Buscar por nombre de cliente o ID..." id="searchClientes">
                </div>
                <div class="filters">
                    <select class="filter-select" id="filterVendedor">
                        <option value="">Todos los vendedores</option>
                        <option value="Juan Pérez">Juan Pérez</option>
                        <option value="María López">María López</option>
                        <option value="Carlos Ruiz">Carlos Ruiz</option>
                    </select>
                    <select class="filter-select" id="filterRegion">
                        <option value="">Todas las regiones</option>
                        <option value="Centro">Centro</option>
                        <option value="Norte">Norte</option>
                        <option value="Sur">Sur</option>
                        <option value="Este">Este</option>
                        <option value="Oeste">Oeste</option>
                    </select>
                    <select class="filter-select" id="filterStatus">
                        <option value="">Todos los estados</option>
                        <option value="Activo">Activo</option>
                        <option value="Inactivo">Inactivo</option>
                        <option value="Prospecto">Prospecto</option>
                    </select>
                </div>
            </div>

            <!-- Vista de Listado de Clientes -->
            <div class="table-container" id="clientesLista">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID Cliente</th>
                            <th>Cliente</th>
                            <th>Vendedor Asignado</th>
                            <th>Región</th>
                            <th>Último Pedido</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-cliente-id="C001">
                            <td><span class="client-id">C001</span></td>
                            <td>
                                <div class="client-info">
                                    <img src="https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=D" alt="Cliente">
                                    <div>
                                        <div class="client-name">Distribuidora El Sol S.A.</div>
                                        <div class="client-company">contacto@elsol.com</div>
                                    </div>
                                </div>
                            </td>
                            <td>Juan Pérez</td>
                            <td>Centro</td>
                            <td>2025-01-20</td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn" title="Ver Detalles" onclick="verDetalleCliente('C001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn" title="Crear Pedido" onclick="crearPedidoCliente('C001')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" title="Ver en Mapa" onclick="verMapaCliente('C001')">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" title="Editar" onclick="editarCliente('C001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-cliente-id="C002">
                            <td><span class="client-id">C002</span></td>
                            <td>
                                <div class="client-info">
                                    <img src="https://via.placeholder.com/32x32/10B981/FFFFFF?text=P" alt="Cliente">
                                    <div>
                                        <div class="client-name">Panadería La Espiga</div>
                                        <div class="client-company">info@laespiga.com</div>
                                    </div>
                                </div>
                            </td>
                            <td>María López</td>
                            <td>Norte</td>
                            <td>2025-01-18</td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn" title="Ver Detalles" onclick="verDetalleCliente('C002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn" title="Crear Pedido" onclick="crearPedidoCliente('C002')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" title="Ver en Mapa" onclick="verMapaCliente('C002')">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" title="Editar" onclick="editarCliente('C002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-cliente-id="C003">
                            <td><span class="client-id">C003</span></td>
                            <td>
                                <div class="client-info">
                                    <img src="https://via.placeholder.com/32x32/F59E0B/FFFFFF?text=F" alt="Cliente">
                                    <div>
                                        <div class="client-name">Ferretería Central</div>
                                        <div class="client-company">ventas@ferreteriacentral.com</div>
                                    </div>
                                </div>
                            </td>
                            <td>Carlos Ruiz</td>
                            <td>Sur</td>
                            <td>2025-01-22</td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn" title="Ver Detalles" onclick="verDetalleCliente('C003')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn" title="Crear Pedido" onclick="crearPedidoCliente('C003')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" title="Ver en Mapa" onclick="verMapaCliente('C003')">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" title="Editar" onclick="editarCliente('C003')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-cliente-id="C004">
                            <td><span class="client-id">C004</span></td>
                            <td>
                                <div class="client-info">
                                    <img src="https://via.placeholder.com/32x32/EF4444/FFFFFF?text=S" alt="Cliente">
                                    <div>
                                        <div class="client-name">Supermercado Mega</div>
                                        <div class="client-company">compras@megasuper.com</div>
                                    </div>
                                </div>
                            </td>
                            <td>Juan Pérez</td>
                            <td>Este</td>
                            <td>2025-01-15</td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn" title="Ver Detalles" onclick="verDetalleCliente('C004')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn" title="Crear Pedido" onclick="crearPedidoCliente('C004')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" title="Ver en Mapa" onclick="verMapaCliente('C004')">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" title="Editar" onclick="editarCliente('C004')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr data-cliente-id="C005">
                            <td><span class="client-id">C005</span></td>
                            <td>
                                <div class="client-info">
                                    <img src="https://via.placeholder.com/32x32/8B5CF6/FFFFFF?text=R" alt="Cliente">
                                    <div>
                                        <div class="client-name">Restaurante El Patio</div>
                                        <div class="client-company">gerencia@elpatio.com</div>
                                    </div>
                                </div>
                            </td>
                            <td>María López</td>
                            <td>Oeste</td>
                            <td>2025-01-19</td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn" title="Ver Detalles" onclick="verDetalleCliente('C005')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="action-btn" title="Crear Pedido" onclick="crearPedidoCliente('C005')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                    <button class="action-btn" title="Ver en Mapa" onclick="verMapaCliente('C005')">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" title="Editar" onclick="editarCliente('C005')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Vista de Detalle de Cliente (Oculta por defecto) -->
            <div class="cliente-detalle" id="clienteDetalle" style="display: none;">
                <div class="detalle-header">
                    <button class="btn btn-secondary" onclick="volverALista()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a la Lista
                    </button>
                    <h2 id="detalleClienteNombre">Detalle del Cliente</h2>
                </div>

                <div class="detalle-content">
                    <!-- Sección 1: Información del Cliente -->
                    <div class="detalle-section">
                        <h3>Información del Cliente</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>ID Cliente:</label>
                                <span id="detalleClienteId">C001</span>
                            </div>
                            <div class="info-item">
                                <label>Nombre de la Empresa:</label>
                                <span id="detalleClienteEmpresa">Distribuidora El Sol S.A.</span>
                            </div>
                            <div class="info-item">
                                <label>Razón Social:</label>
                                <span id="detalleClienteRazon">Distribuidora El Sol, S.A. de C.V.</span>
                            </div>
                            <div class="info-item">
                                <label>RFC/NIT:</label>
                                <span id="detalleClienteRfc">ABC123456XYZ</span>
                            </div>
                            <div class="info-item">
                                <label>Dirección:</label>
                                <span id="detalleClienteDireccion">Av. Insurgentes Sur 1234, Col. Del Valle, Ciudad de México</span>
                            </div>
                            <div class="info-item">
                                <label>Teléfono:</label>
                                <span id="detalleClienteTelefono">+52 55 1234 5678</span>
                            </div>
                            <div class="info-item">
                                <label>Email:</label>
                                <span id="detalleClienteEmail">contacto@elsol.com</span>
                            </div>
                            <div class="info-item">
                                <label>Vendedor Asignado:</label>
                                <span id="detalleClienteVendedor">Juan Pérez</span>
                            </div>
                            <div class="info-item">
                                <label>Condiciones de Pago:</label>
                                <span id="detalleClienteCondiciones">Crédito 30 días</span>
                            </div>
                            <div class="info-item">
                                <label>Estado:</label>
                                <span id="detalleClienteEstado" class="status active">Activo</span>
                            </div>
                        </div>
                        <div class="detalle-actions">
                            <button class="btn btn-primary" onclick="editarClienteDesdeDetalle()">
                                <i class="fas fa-edit"></i>
                                Editar Cliente
                            </button>
                        </div>
                    </div>

                    <!-- Sección 2: Geolocalización -->
                    <div class="detalle-section">
                        <h3>Ubicación del Cliente</h3>
                        <div class="mapa-container">
                            <div class="mapa-placeholder" id="mapaCliente">
                                <div class="mapa-overlay">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <p>Ubicación: Av. Insurgentes Sur 1234, Col. Del Valle</p>
                                    <button class="btn btn-secondary" onclick="abrirGoogleMaps()">
                                        <i class="fas fa-external-link-alt"></i>
                                        Abrir en Google Maps
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 3: Historial de Pedidos -->
                    <div class="detalle-section">
                        <h3>Historial de Pedidos</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>No. Pedido</th>
                                        <th>Fecha</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="historialPedidos">
                                    <tr>
                                        <td>P0010</td>
                                        <td>2025-01-20</td>
                                        <td>€1,500.00</td>
                                        <td><span class="status completed">Entregado</span></td>
                                        <td>
                                            <button class="action-btn" title="Ver Detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>P0008</td>
                                        <td>2025-01-15</td>
                                        <td>€2,300.00</td>
                                        <td><span class="status completed">Entregado</span></td>
                                        <td>
                                            <button class="action-btn" title="Ver Detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>P0005</td>
                                        <td>2025-01-10</td>
                                        <td>€890.00</td>
                                        <td><span class="status completed">Entregado</span></td>
                                        <td>
                                            <button class="action-btn" title="Ver Detalles">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Sección 4: Acciones Rápidas -->
                    <div class="detalle-section">
                        <div class="acciones-rapidas">
                            <button class="btn btn-primary btn-large" onclick="crearPedidoDesdeDetalle()">
                                <i class="fas fa-plus"></i>
                                Crear Nuevo Pedido para este Cliente
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulario de Creación/Edición de Cliente (Oculto por defecto) -->
            <div class="formulario-cliente" id="formularioCliente" style="display: none;">
                <div class="formulario-header">
                    <button class="btn btn-secondary" onclick="cancelarFormulario()">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <h2 id="formularioTitulo">Nuevo Cliente</h2>
                </div>

                <form class="cliente-form" id="clienteForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nombreEmpresa">Nombre de la Empresa/Cliente *</label>
                            <input type="text" id="nombreEmpresa" name="nombreEmpresa" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="razonSocial">Razón Social</label>
                            <input type="text" id="razonSocial" name="razonSocial">
                        </div>
                        
                        <div class="form-group">
                            <label for="rfc">RFC/NIT</label>
                            <input type="text" id="rfc" name="rfc" placeholder="ABC123456XYZ">
                        </div>
                        
                        <div class="form-group">
                            <label for="direccion">Dirección *</label>
                            <div class="direccion-container">
                                <input type="text" id="direccion" name="direccion" required>
                                <button type="button" class="btn btn-secondary" onclick="ubicarEnMapa()">
                                    <i class="fas fa-map-marker-alt"></i>
                                    Ubicar en Mapa
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="telefono">Teléfono</label>
                            <input type="tel" id="telefono" name="telefono" placeholder="+52 55 1234 5678">
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" placeholder="contacto@empresa.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="vendedorAsignado">Vendedor Asignado</label>
                            <select id="vendedorAsignado" name="vendedorAsignado">
                                <option value="">Seleccionar vendedor</option>
                                <option value="Juan Pérez">Juan Pérez</option>
                                <option value="María López">María López</option>
                                <option value="Carlos Ruiz">Carlos Ruiz</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="condicionesPago">Condiciones de Pago</label>
                            <select id="condicionesPago" name="condicionesPago">
                                <option value="Contado">Contado</option>
                                <option value="Crédito 15 días">Crédito 15 días</option>
                                <option value="Crédito 30 días">Crédito 30 días</option>
                                <option value="Crédito 60 días">Crédito 60 días</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="region">Región</label>
                            <select id="region" name="region">
                                <option value="">Seleccionar región</option>
                                <option value="Centro">Centro</option>
                                <option value="Norte">Norte</option>
                                <option value="Sur">Sur</option>
                                <option value="Este">Este</option>
                                <option value="Oeste">Oeste</option>
                            </select>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="notasAdicionales">Notas Adicionales</label>
                            <textarea id="notasAdicionales" name="notasAdicionales" rows="3" placeholder="Información adicional sobre el cliente..."></textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="cancelarFormulario()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Cliente
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Ventas Section -->
        <section id="ventas" class="section">
            <div class="section-header">
                <h1>Gestión de Ventas y Pedidos</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevoPedido">
                        <i class="fas fa-plus"></i>
                        Nuevo Pedido
                    </button>
                    <button class="btn btn-secondary" id="btnGestionRutas">
                        <i class="fas fa-route"></i>
                        Gestión de Rutas
                    </button>
                </div>
            </div>

            <!-- Vista Principal de Pedidos -->
            <div class="pedidos-container" id="pedidosContainer">
                <div class="search-filters">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar por No. de Pedido o Cliente..." id="searchPedidos">
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="filterEstadoPedido">
                            <option value="">Todos los estados</option>
                            <option value="Pendiente">Pendiente</option>
                            <option value="En Proceso">En Proceso</option>
                            <option value="Completado">Completado</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                        <select class="filter-select" id="filterFechaPedido">
                            <option value="">Todas las fechas</option>
                            <option value="hoy">Hoy</option>
                            <option value="semana">Esta semana</option>
                            <option value="mes">Este mes</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>No. Pedido</th>
                                <th>Cliente</th>
                                <th>Fecha de Creación</th>
                                <th>Total</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-pedido-id="P0010">
                                <td><span class="pedido-id">P0010</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=D" alt="Cliente">
                                        <div>
                                            <div class="client-name">Distribuidora El Sol S.A.</div>
                                            <div class="client-company">Juan Pérez</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-20</td>
                                <td>€1,500.00</td>
                                <td><span class="status completed">Completado</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetallePedido('P0010')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Pedido" onclick="editarPedido('P0010')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Imprimir" onclick="imprimirPedido('P0010')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-pedido-id="P0011">
                                <td><span class="pedido-id">P0011</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/10B981/FFFFFF?text=P" alt="Cliente">
                                        <div>
                                            <div class="client-name">Panadería La Espiga</div>
                                            <div class="client-company">María López</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-22</td>
                                <td>€850.50</td>
                                <td><span class="status pending">Pendiente</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetallePedido('P0011')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Pedido" onclick="editarPedido('P0011')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Marcar como Entregado" onclick="marcarEntregado('P0011')">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-pedido-id="P0012">
                                <td><span class="pedido-id">P0012</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/F59E0B/FFFFFF?text=F" alt="Cliente">
                                        <div>
                                            <div class="client-name">Ferretería Central</div>
                                            <div class="client-company">Carlos Ruiz</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-23</td>
                                <td>€2,300.00</td>
                                <td><span class="status process">En Proceso</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetallePedido('P0012')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Pedido" onclick="editarPedido('P0012')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Marcar como Entregado" onclick="marcarEntregado('P0012')">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-pedido-id="P0013">
                                <td><span class="pedido-id">P0013</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/EF4444/FFFFFF?text=S" alt="Cliente">
                                        <div>
                                            <div class="client-name">Supermercado Mega</div>
                                            <div class="client-company">Juan Pérez</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-24</td>
                                <td>€1,750.00</td>
                                <td><span class="status pending">Pendiente</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetallePedido('P0013')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Pedido" onclick="editarPedido('P0013')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Marcar como Entregado" onclick="marcarEntregado('P0013')">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-pedido-id="P0014">
                                <td><span class="pedido-id">P0014</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/8B5CF6/FFFFFF?text=R" alt="Cliente">
                                        <div>
                                            <div class="client-name">Restaurante El Patio</div>
                                            <div class="client-company">María López</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-25</td>
                                <td>€950.00</td>
                                <td><span class="status process">En Proceso</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetallePedido('P0014')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Pedido" onclick="editarPedido('P0014')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Marcar como Entregado" onclick="marcarEntregado('P0014')">
                                            <i class="fas fa-check"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Formulario de Creación de Nuevo Pedido (Oculto por defecto) -->
            <div class="formulario-pedido" id="formularioPedido" style="display: none;">
                <div class="formulario-header">
                    <button class="btn btn-secondary" onclick="cancelarFormularioPedido()">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <h2 id="formularioPedidoTitulo">Nuevo Pedido</h2>
                </div>

                <form class="pedido-form" id="pedidoForm">
                    <!-- Paso 1: Selección de Cliente -->
                    <div class="form-step" id="step1">
                        <h3>Paso 1: Selección de Cliente</h3>
                        <div class="form-group">
                            <label for="clientePedido">Cliente *</label>
                            <div class="cliente-search-container">
                                <input type="text" id="clientePedido" name="clientePedido" placeholder="Buscar cliente..." required>
                                <div class="cliente-suggestions" id="clienteSuggestions" style="display: none;">
                                    <!-- Las sugerencias se cargarán dinámicamente -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="cliente-resumen" id="clienteResumen" style="display: none;">
                            <h4>Resumen del Cliente</h4>
                            <div class="cliente-info-card">
                                <div class="cliente-avatar">
                                    <img src="" alt="Cliente" id="clienteAvatar">
                                </div>
                                <div class="cliente-details">
                                    <h5 id="clienteNombre">Nombre del Cliente</h5>
                                    <p id="clienteDireccion">Dirección del cliente</p>
                                    <p id="clienteContacto">Contacto del cliente</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button type="button" class="btn btn-primary" onclick="siguientePaso()">
                                Siguiente <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 2: Adición de Productos -->
                    <div class="form-step" id="step2" style="display: none;">
                        <h3>Paso 2: Productos del Pedido</h3>
                        
                        <div class="producto-search-container">
                            <div class="form-group">
                                <label for="productoPedido">Buscar Producto</label>
                                <div class="producto-search">
                                    <input type="text" id="productoPedido" name="productoPedido" placeholder="Buscar producto...">
                                    <div class="producto-suggestions" id="productoSuggestions" style="display: none;">
                                        <!-- Las sugerencias se cargarán dinámicamente -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="producto-seleccionado" id="productoSeleccionado" style="display: none;">
                                <div class="producto-info">
                                    <h5 id="productoNombre">Nombre del Producto</h5>
                                    <div class="producto-details">
                                        <span>Precio: <strong id="productoPrecio">€0.00</strong></span>
                                        <span>Stock: <strong id="productoStock">0</strong></span>
                                    </div>
                                </div>
                                <div class="producto-cantidad">
                                    <label for="productoCantidad">Cantidad:</label>
                                    <input type="number" id="productoCantidad" name="productoCantidad" min="1" value="1">
                                    <button type="button" class="btn btn-primary" onclick="agregarProducto()">
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="productos-agregados">
                            <h4>Productos Agregados</h4>
                            <div class="table-container">
                                <table class="data-table" id="productosTable">
                                    <thead>
                                        <tr>
                                            <th>Producto</th>
                                            <th>Cantidad</th>
                                            <th>Precio Unitario</th>
                                            <th>Subtotal</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productosTableBody">
                                        <!-- Los productos se agregarán dinámicamente -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="pedido-resumen">
                                <div class="form-group">
                                    <label for="descuentoPedido">Descuento (%)</label>
                                    <input type="number" id="descuentoPedido" name="descuentoPedido" min="0" max="100" value="0">
                                </div>
                                <div class="totales">
                                    <div class="total-item">
                                        <span>Subtotal:</span>
                                        <span id="subtotalPedido">€0.00</span>
                                    </div>
                                    <div class="total-item">
                                        <span>Descuento:</span>
                                        <span id="descuentoCalculado">€0.00</span>
                                    </div>
                                    <div class="total-item total-final">
                                        <span>Total:</span>
                                        <span id="totalPedido">€0.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button type="button" class="btn btn-secondary" onclick="anteriorPaso()">
                                <i class="fas fa-arrow-left"></i> Anterior
                            </button>
                            <button type="button" class="btn btn-primary" onclick="siguientePaso()">
                                Siguiente <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Paso 3: Detalles y Pago -->
                    <div class="form-step" id="step3" style="display: none;">
                        <h3>Paso 3: Detalles y Pago</h3>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fechaEntrega">Fecha de Entrega Deseada</label>
                                <input type="date" id="fechaEntrega" name="fechaEntrega" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="notasPedido">Notas del Pedido</label>
                                <textarea id="notasPedido" name="notasPedido" rows="3" placeholder="Información adicional sobre el pedido..."></textarea>
                            </div>
                        </div>
                        
                        <div class="metodo-pago-section">
                            <h4>Método de Pago</h4>
                            <div class="metodos-pago">
                                <div class="metodo-pago">
                                    <input type="radio" id="pagoCredito" name="metodoPago" value="credito">
                                    <label for="pagoCredito">
                                        <i class="fas fa-credit-card"></i>
                                        <span>Crédito</span>
                                    </label>
                                </div>
                                <div class="metodo-pago">
                                    <input type="radio" id="pagoEfectivo" name="metodoPago" value="efectivo">
                                    <label for="pagoEfectivo">
                                        <i class="fas fa-money-bill-wave"></i>
                                        <span>Efectivo</span>
                                    </label>
                                </div>
                                <div class="metodo-pago">
                                    <input type="radio" id="pagoStripe" name="metodoPago" value="stripe">
                                    <label for="pagoStripe">
                                        <i class="fab fa-stripe"></i>
                                        <span>Tarjeta (Stripe)</span>
                                    </label>
                                </div>
                                <div class="metodo-pago">
                                    <input type="radio" id="pagoTpvClip" name="metodoPago" value="tpvclip">
                                    <label for="pagoTpvClip">
                                        <i class="fas fa-mobile-alt"></i>
                                        <span>TPV Clip</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Campos específicos según método de pago -->
                            <div class="pago-campos" id="pagoCampos" style="display: none;">
                                <div class="pago-stripe" id="pagoStripeCampos" style="display: none;">
                                    <p>Redirigiendo a Stripe para procesar el pago...</p>
                                    <button type="button" class="btn btn-primary">
                                        <i class="fab fa-stripe"></i> Pagar con Stripe
                                    </button>
                                </div>
                                <div class="pago-tpvclip" id="pagoTpvClipCampos" style="display: none;">
                                    <p>Escanear comprobante de pago</p>
                                    <button type="button" class="btn btn-primary">
                                        <i class="fas fa-camera"></i> Escanear Comprobante
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pedido-final">
                            <div class="total-final-card">
                                <h4>Total a Pagar</h4>
                                <div class="total-amount" id="totalFinalPedido">€0.00</div>
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button type="button" class="btn btn-secondary" onclick="anteriorPaso()">
                                <i class="fas fa-arrow-left"></i> Anterior
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="guardarBorrador()">
                                <i class="fas fa-save"></i> Guardar Borrador
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-check"></i> Confirmar Pedido
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Vista de Gestión de Rutas (Oculta por defecto) -->
            <div class="rutas-container" id="rutasContainer" style="display: none;">
                <div class="rutas-header">
                    <button class="btn btn-secondary" onclick="volverAPedidos()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a Pedidos
                    </button>
                    <h2>Gestión de Rutas</h2>
                    <button class="btn btn-primary" onclick="crearNuevaRuta()">
                        <i class="fas fa-plus"></i>
                        Crear Nueva Ruta
                    </button>
                </div>

                <div class="rutas-content">
                    <!-- Mapa -->
                    <div class="mapa-rutas">
                        <div class="mapa-placeholder" id="mapaRutas">
                            <div class="mapa-overlay">
                                <i class="fas fa-map-marked-alt"></i>
                                <p>Mapa de Rutas - Ubicaciones de Clientes</p>
                                <div class="mapa-controles">
                                    <button class="btn btn-secondary" onclick="optimizarRuta()">
                                        <i class="fas fa-route"></i> Optimizar Ruta
                                    </button>
                                    <button class="btn btn-secondary" onclick="verRutaActual()">
                                        <i class="fas fa-eye"></i> Ver Ruta Actual
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Panel de Control -->
                    <div class="rutas-panel">
                        <!-- Creación de Ruta -->
                        <div class="ruta-creacion" id="rutaCreacion">
                            <h3>Crear Nueva Ruta</h3>
                            <div class="form-group">
                                <label for="nombreRuta">Nombre de la Ruta</label>
                                <input type="text" id="nombreRuta" name="nombreRuta" placeholder="Ej: Ruta Zona Centro Lunes">
                            </div>
                            <div class="form-group">
                                <label for="fechaRuta">Fecha</label>
                                <input type="date" id="fechaRuta" name="fechaRuta">
                            </div>
                            <div class="form-group">
                                <label for="vendedorRuta">Vendedor Asignado</label>
                                <select id="vendedorRuta" name="vendedorRuta">
                                    <option value="">Seleccionar vendedor</option>
                                    <option value="Juan Pérez">Juan Pérez</option>
                                    <option value="María López">María López</option>
                                    <option value="Carlos Ruiz">Carlos Ruiz</option>
                                </select>
                            </div>
                            
                            <div class="clientes-ruta">
                                <h4>Clientes en la Ruta</h4>
                                <div class="clientes-lista" id="clientesRuta">
                                    <!-- Los clientes se agregarán dinámicamente -->
                                </div>
                                <button type="button" class="btn btn-secondary" onclick="agregarClienteRuta()">
                                    <i class="fas fa-plus"></i> Agregar Cliente
                                </button>
                            </div>
                            
                            <div class="ruta-actions">
                                <button type="button" class="btn btn-secondary" onclick="optimizarRuta()">
                                    <i class="fas fa-route"></i> Optimizar Ruta
                                </button>
                                <button type="button" class="btn btn-primary" onclick="guardarRuta()">
                                    <i class="fas fa-save"></i> Guardar Ruta
                                </button>
                            </div>
                        </div>

                        <!-- Listado de Rutas Existentes -->
                        <div class="rutas-existentes">
                            <h3>Rutas Existentes</h3>
                            <div class="rutas-lista">
                                <div class="ruta-item">
                                    <div class="ruta-info">
                                        <h4>Ruta Zona Centro Lunes</h4>
                                        <p>Fecha: 2025-01-27 | Vendedor: Juan Pérez</p>
                                        <span class="status process">En Progreso</span>
                                    </div>
                                    <div class="ruta-actions">
                                        <button class="action-btn" title="Ver Detalles">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="ruta-item">
                                    <div class="ruta-info">
                                        <h4>Ruta Norte Martes</h4>
                                        <p>Fecha: 2025-01-28 | Vendedor: María López</p>
                                        <span class="status active">Planificada</span>
                                    </div>
                                    <div class="ruta-actions">
                                        <button class="action-btn" title="Ver Detalles">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="ruta-item">
                                    <div class="ruta-info">
                                        <h4>Ruta Sur Miércoles</h4>
                                        <p>Fecha: 2025-01-29 | Vendedor: Carlos Ruiz</p>
                                        <span class="status completed">Completada</span>
                                    </div>
                                    <div class="ruta-actions">
                                        <button class="action-btn" title="Ver Detalles">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista de Progreso de Ruta (Móvil) -->
            <div class="ruta-progreso" id="rutaProgreso" style="display: none;">
                <div class="progreso-header">
                    <button class="btn btn-secondary" onclick="volverAPedidos()">
                        <i class="fas fa-arrow-left"></i>
                        Volver
                    </button>
                    <div class="progreso-info">
                        <h3 id="rutaActualNombre">Ruta Actual: Zona Centro</h3>
                        <p id="rutaActualFecha">Fecha: 2025-01-27</p>
                    </div>
                </div>

                <div class="clientes-progreso">
                    <div class="cliente-progreso-item">
                        <div class="cliente-info">
                            <h4>Distribuidora El Sol S.A.</h4>
                            <p>Av. Insurgentes Sur 1234, Col. Del Valle</p>
                            <span class="status completed">Visitado</span>
                        </div>
                        <div class="cliente-actions">
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-map-marker-alt"></i>
                            </button>
                            <button class="btn btn-primary btn-sm">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>

                    <div class="cliente-progreso-item">
                        <div class="cliente-info">
                            <h4>Panadería La Espiga</h4>
                            <p>Calle Reforma 567, Col. Centro</p>
                            <span class="status pending">Pendiente</span>
                        </div>
                        <div class="cliente-actions">
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-map-marker-alt"></i>
                            </button>
                            <button class="btn btn-primary btn-sm">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>

                    <div class="cliente-progreso-item">
                        <div class="cliente-info">
                            <h4>Ferretería Central</h4>
                            <p>Blvd. Constitución 890, Col. Industrial</p>
                            <span class="status pending">Pendiente</span>
                        </div>
                        <div class="cliente-actions">
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-map-marker-alt"></i>
                            </button>
                            <button class="btn btn-primary btn-sm">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                            <button class="btn btn-secondary btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Productos Section -->
        <section id="productos" class="section">
            <div class="section-header">
                <h1>Gestión de Productos</h1>
                <div class="section-actions">
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Nuevo Producto
                    </button>
                </div>
            </div>

            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categoría</th>
                            <th>Precio</th>
                            <th>Stock</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="product-info">
                                    <img src="https://via.placeholder.com/40x40/4F46E5/FFFFFF?text=P" alt="Producto">
                                    <div>
                                        <div class="product-name">Producto A</div>
                                        <div class="product-sku">SKU: PRD-001</div>
                                    </div>
                                </div>
                            </td>
                            <td>Electrónicos</td>
                            <td>€299</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level high">45</span>
                                    <div class="stock-bar">
                                        <div class="stock-fill high" style="width: 75%"></div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="product-info">
                                    <img src="https://via.placeholder.com/40x40/10B981/FFFFFF?text=P" alt="Producto">
                                    <div>
                                        <div class="product-name">Producto B</div>
                                        <div class="product-sku">SKU: PRD-002</div>
                                    </div>
                                </div>
                            </td>
                            <td>Ropa</td>
                            <td>€89</td>
                            <td>
                                <div class="stock-info">
                                    <span class="stock-level low">8</span>
                                    <div class="stock-bar">
                                        <div class="stock-fill low" style="width: 15%"></div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="status active">Activo</span></td>
                            <td>
                                <div class="actions">
                                    <button class="action-btn"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Informes Section -->
        <section id="informes" class="section">
            <div class="section-header">
                <h1>Reportes y Análisis Ejecutivo</h1>
                <div class="section-actions">
                    <select class="period-selector" id="periodoSelector">
                        <option value="hoy">Hoy</option>
                        <option value="semana">Esta Semana</option>
                        <option value="mes" selected>Este Mes</option>
                        <option value="trimestre">Este Trimestre</option>
                        <option value="año">Este Año</option>
                        <option value="personalizado">Personalizado</option>
                    </select>
                    <button class="btn btn-primary" id="btnExportarReporte">
                        <i class="fas fa-download"></i>
                        Exportar Reporte
                    </button>
                </div>
            </div>

            <!-- Dashboard Ejecutivo Principal -->
            <div class="dashboard-ejecutivo" id="dashboardEjecutivo">
                <!-- KPIs Principales -->
                <div class="kpis-principales">
                    <div class="kpi-card kpi-ventas">
                        <div class="kpi-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>Ventas Totales</h3>
                            <div class="kpi-value" id="ventasTotales">$1,250,000 MXN</div>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i>
                                +12% vs. mes anterior
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card kpi-clientes">
                        <div class="kpi-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>Nuevos Clientes</h3>
                            <div class="kpi-value" id="nuevosClientes">150</div>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i>
                                +25% vs. mes anterior
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card kpi-promedio">
                        <div class="kpi-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>Promedio por Pedido</h3>
                            <div class="kpi-value" id="promedioPedido">$850 MXN</div>
                            <div class="kpi-trend positive">
                                <i class="fas fa-arrow-up"></i>
                                +8% vs. mes anterior
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card kpi-productos">
                        <div class="kpi-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="kpi-content">
                            <h3>Productos Más Vendidos</h3>
                            <div class="kpi-value" id="topProductos">
                                <div class="top-producto">
                                    <span>1. Harina Premium</span>
                                    <span class="producto-ventas">$45,200</span>
                                </div>
                                <div class="top-producto">
                                    <span>2. Aceite Oliva</span>
                                    <span class="producto-ventas">$38,500</span>
                                </div>
                                <div class="top-producto">
                                    <span>3. Café Molido</span>
                                    <span class="producto-ventas">$32,100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gráficos Destacados -->
                <div class="graficos-destacados">
                    <!-- Gráfico de Líneas: Evolución de Ventas -->
                    <div class="grafico-container">
                        <div class="grafico-header">
                            <h3>Evolución de Ventas Mensuales</h3>
                            <div class="grafico-actions">
                                <button class="btn btn-sm btn-secondary" onclick="cambiarPeriodoGrafico('meses')">
                                    <i class="fas fa-calendar"></i> Meses
                                </button>
                                <button class="btn btn-sm btn-secondary" onclick="cambiarPeriodoGrafico('trimestres')">
                                    <i class="fas fa-calendar-alt"></i> Trimestres
                                </button>
                            </div>
                        </div>
                        <div class="grafico-content">
                            <canvas id="evolucionVentasChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Gráfico de Barras: Ventas por Vendedor -->
                    <div class="grafico-container">
                        <div class="grafico-header">
                            <h3>Ventas por Vendedor</h3>
                            <div class="grafico-actions">
                                <button class="btn btn-sm btn-secondary" onclick="ordenarVendedores('ventas')">
                                    <i class="fas fa-sort-amount-down"></i> Por Ventas
                                </button>
                            </div>
                        </div>
                        <div class="grafico-content">
                            <canvas id="ventasVendedorChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Gráfico de Donut: Ventas por Categoría -->
                    <div class="grafico-container">
                        <div class="grafico-header">
                            <h3>Ventas por Categoría de Producto</h3>
                            <div class="grafico-actions">
                                <button class="btn btn-sm btn-secondary" onclick="mostrarDetalleCategorias()">
                                    <i class="fas fa-info-circle"></i> Detalles
                                </button>
                            </div>
                        </div>
                        <div class="grafico-content">
                            <canvas id="ventasCategoriaChart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <!-- Mapa de Calor: Ventas por Región -->
                    <div class="grafico-container">
                        <div class="grafico-header">
                            <h3>Ventas por Región Geográfica</h3>
                            <div class="grafico-actions">
                                <button class="btn btn-sm btn-secondary" onclick="zoomMapa()">
                                    <i class="fas fa-search-plus"></i> Zoom
                                </button>
                            </div>
                        </div>
                        <div class="grafico-content">
                            <div class="mapa-calor" id="mapaCalor">
                                <div class="mapa-overlay">
                                    <i class="fas fa-map-marked-alt"></i>
                                    <p>Mapa de Calor - Ventas por Región</p>
                                    <div class="mapa-leyenda">
                                        <div class="leyenda-item">
                                            <span class="leyenda-color alta"></span>
                                            <span>Alta (>$300K)</span>
                                        </div>
                                        <div class="leyenda-item">
                                            <span class="leyenda-color media"></span>
                                            <span>Media ($150K-$300K)</span>
                                        </div>
                                        <div class="leyenda-item">
                                            <span class="leyenda-color baja"></span>
                                            <span>Baja (<$150K)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Métricas Adicionales -->
                <div class="metricas-adicionales">
                    <div class="metrica-card">
                        <h4>Eficiencia Operativa</h4>
                        <div class="metrica-value">94.2%</div>
                        <div class="metrica-desc">Tasa de cumplimiento de pedidos</div>
                    </div>
                    <div class="metrica-card">
                        <h4>Retención de Clientes</h4>
                        <div class="metrica-value">87.5%</div>
                        <div class="metrica-desc">Clientes que repiten compra</div>
                    </div>
                    <div class="metrica-card">
                        <h4>Margen de Ganancia</h4>
                        <div class="metrica-value">32.8%</div>
                        <div class="metrica-desc">Promedio del último trimestre</div>
                    </div>
                    <div class="metrica-card">
                        <h4>ROI Marketing</h4>
                        <div class="metrica-value">4.2x</div>
                        <div class="metrica-desc">Retorno sobre inversión</div>
                    </div>
                </div>
            </div>

            <!-- Panel de Navegación a Reportes Detallados -->
            <div class="reportes-navegacion" id="reportesNavegacion">
                <div class="reportes-header">
                    <h2>Reportes Detallados</h2>
                    <p>Accede a análisis específicos para toma de decisiones estratégicas</p>
                </div>

                <div class="reportes-grid">
                    <div class="reporte-card" onclick="abrirReporte('ventas-producto')">
                        <div class="reporte-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Ventas por Producto</h3>
                            <p>Análisis detallado del rendimiento de productos individuales</p>
                            <div class="reporte-stats">
                                <span>Top 10 productos</span>
                                <span>Análisis de tendencias</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('ventas-vendedor')">
                        <div class="reporte-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Ventas por Vendedor</h3>
                            <p>Evaluación del rendimiento individual del equipo de ventas</p>
                            <div class="reporte-stats">
                                <span>Ranking de vendedores</span>
                                <span>Métricas de productividad</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('ventas-region')">
                        <div class="reporte-icon">
                            <i class="fas fa-map"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Ventas por Región Geográfica</h3>
                            <p>Análisis territorial y oportunidades de expansión</p>
                            <div class="reporte-stats">
                                <span>Análisis por zona</span>
                                <span>Oportunidades de mercado</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('historial-pedidos')">
                        <div class="reporte-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Historial de Pedidos</h3>
                            <p>Análisis temporal y patrones de compra de clientes</p>
                            <div class="reporte-stats">
                                <span>Patrones temporales</span>
                                <span>Análisis de estacionalidad</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('inventario')">
                        <div class="reporte-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Estado de Inventario</h3>
                            <p>KPIs de stock, rotación y gestión de inventario</p>
                            <div class="reporte-stats">
                                <span>Rotación de inventario</span>
                                <span>Stock mínimo/máximo</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('rendimiento-rutas')">
                        <div class="reporte-icon">
                            <i class="fas fa-route"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Rendimiento de Rutas</h3>
                            <p>Eficiencia logística y optimización de rutas de venta</p>
                            <div class="reporte-stats">
                                <span>Eficiencia de rutas</span>
                                <span>Tiempo de entrega</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('clientes')">
                        <div class="reporte-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Reporte de Clientes</h3>
                            <p>Análisis de nuevos vs. existentes y segmentación</p>
                            <div class="reporte-stats">
                                <span>Segmentación de clientes</span>
                                <span>Valor del cliente (LTV)</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>

                    <div class="reporte-card" onclick="abrirReporte('resumen-financiero')">
                        <div class="reporte-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="reporte-content">
                            <h3>Resumen Financiero</h3>
                            <p>Análisis completo de ingresos, costos y rentabilidad</p>
                            <div class="reporte-stats">
                                <span>Estado de resultados</span>
                                <span>Análisis de rentabilidad</span>
                            </div>
                        </div>
                        <div class="reporte-action">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista de Reporte Detallado (Oculta por defecto) -->
            <div class="reporte-detallado" id="reporteDetallado" style="display: none;">
                <div class="reporte-header">
                    <button class="btn btn-secondary" onclick="volverADashboard()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al Dashboard
                    </button>
                    <h2 id="reporteTitulo">Reporte Detallado</h2>
                    <div class="reporte-actions">
                        <button class="btn btn-secondary" onclick="exportarReporte()">
                            <i class="fas fa-download"></i>
                            Exportar PDF
                        </button>
                        <button class="btn btn-primary" onclick="compartirReporte()">
                            <i class="fas fa-share"></i>
                            Compartir
                        </button>
                    </div>
                </div>

                <div class="reporte-content" id="reporteContent">
                    <!-- El contenido del reporte se cargará dinámicamente -->
                </div>
            </div>
        </section>

        <!-- Portal de Cliente Section -->
        <section id="portal-cliente" class="section">
            <div class="section-header">
                <h1>Portal de Cliente - Pedidos en Línea</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevoPedidoCliente">
                        <i class="fas fa-plus"></i>
                        Nuevo Pedido
                    </button>
                    <button class="btn btn-secondary" id="btnMiCuenta">
                        <i class="fas fa-user"></i>
                        Mi Cuenta
                    </button>
                </div>
            </div>

            <!-- Vista de Inicio / Catálogo -->
            <div class="portal-inicio" id="portalInicio">
                <!-- Header del Portal -->
                <div class="portal-header">
                    <div class="portal-logo">
                        <img src="LogoElTrigal.webp" alt="El Trigal" class="logo-img">
                        <h2>El Trigal - Portal de Cliente</h2>
                    </div>
                    <div class="portal-nav">
                        <div class="search-container">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Buscar productos..." id="searchProductos">
                        </div>
                        <div class="portal-actions">
                            <button class="btn btn-icon" onclick="mostrarCarrito()">
                                <i class="fas fa-shopping-cart"></i>
                                <span class="cart-count" id="cartCount">0</span>
                            </button>
                            <button class="btn btn-icon" onclick="mostrarMiCuenta()">
                                <i class="fas fa-user"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Carrusel de Productos Destacados -->
                <div class="carousel-container">
                    <div class="carousel-slide active">
                        <div class="carousel-content">
                            <h3>¡Ofertas Especiales!</h3>
                            <p>Hasta 30% de descuento en productos seleccionados</p>
                            <button class="btn btn-primary">Ver Ofertas</button>
                        </div>
                        <div class="carousel-image">
                            <div class="placeholder-image">🎯</div>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <div class="carousel-content">
                            <h3>Nuevos Productos</h3>
                            <p>Descubre nuestra última colección</p>
                            <button class="btn btn-primary">Explorar</button>
                        </div>
                        <div class="carousel-image">
                            <div class="placeholder-image">🆕</div>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <div class="carousel-content">
                            <h3>Envío Gratis</h3>
                            <p>En pedidos superiores a $2,000 MXN</p>
                            <button class="btn btn-primary">Comprar Ahora</button>
                        </div>
                        <div class="carousel-image">
                            <div class="placeholder-image">🚚</div>
                        </div>
                    </div>
                    <button class="carousel-btn prev" onclick="cambiarSlide(-1)">❮</button>
                    <button class="carousel-btn next" onclick="cambiarSlide(1)">❯</button>
                </div>

                <!-- Filtros de Productos -->
                <div class="filtros-productos">
                    <div class="filtro-grupo">
                        <label for="filtroCategoria">Categoría:</label>
                        <select id="filtroCategoria" onchange="filtrarProductos()">
                            <option value="">Todas las categorías</option>
                            <option value="Electrónicos">Electrónicos</option>
                            <option value="Oficina">Oficina</option>
                            <option value="Hogar">Hogar</option>
                            <option value="Gaming">Gaming</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtroMarca">Marca:</label>
                        <select id="filtroMarca" onchange="filtrarProductos()">
                            <option value="">Todas las marcas</option>
                            <option value="Dell">Dell</option>
                            <option value="HP">HP</option>
                            <option value="Samsung">Samsung</option>
                            <option value="Apple">Apple</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtroPrecio">Precio:</label>
                        <select id="filtroPrecio" onchange="filtrarProductos()">
                            <option value="">Todos los precios</option>
                            <option value="0-500">$0 - $500</option>
                            <option value="500-1000">$500 - $1,000</option>
                            <option value="1000-2000">$1,000 - $2,000</option>
                            <option value="2000+">Más de $2,000</option>
                        </select>
                    </div>
                </div>

                <!-- Catálogo de Productos -->
                <div class="productos-grid" id="productosGrid">
                    <div class="producto-card" data-categoria="Electrónicos" data-marca="Dell" data-precio="1200">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">💻</div>
                            <div class="producto-badge oferta">-15%</div>
                        </div>
                        <div class="producto-info">
                            <h3>Laptop Ultraligera X200</h3>
                            <p class="producto-sku">SKU: LAP001</p>
                            <div class="producto-precio">
                                <span class="precio-original">$1,400.00</span>
                                <span class="precio-actual">$1,200.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD001')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD001')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Oficina" data-marca="HP" data-precio="350">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">🖥️</div>
                        </div>
                        <div class="producto-info">
                            <h3>Monitor Curvo 27"</h3>
                            <p class="producto-sku">SKU: MON002</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$350.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD002')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD002')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Gaming" data-marca="Samsung" data-precio="120">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">⌨️</div>
                            <div class="producto-badge nuevo">Nuevo</div>
                        </div>
                        <div class="producto-info">
                            <h3>Teclado Mecánico RGB</h3>
                            <p class="producto-sku">SKU: TEC003</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$120.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-pocas">Pocas Unidades</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD003')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD003')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Gaming" data-marca="Apple" data-precio="85">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">🖱️</div>
                        </div>
                        <div class="producto-info">
                            <h3>Mouse Gaming Pro</h3>
                            <p class="producto-sku">SKU: MOU004</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$85.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD004')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD004')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Electrónicos" data-marca="Samsung" data-precio="95">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">🎧</div>
                        </div>
                        <div class="producto-info">
                            <h3>Auriculares Bluetooth</h3>
                            <p class="producto-sku">SKU: AUR005</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$95.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD005')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD005')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Hogar" data-marca="Dell" data-precio="25">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">🔌</div>
                        </div>
                        <div class="producto-info">
                            <h3>Cable USB-C Premium</h3>
                            <p class="producto-sku">SKU: CAB006</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$25.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD006')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD006')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Oficina" data-marca="HP" data-precio="45">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">📱</div>
                        </div>
                        <div class="producto-info">
                            <h3>Soporte para Tablet</h3>
                            <p class="producto-sku">SKU: SOP007</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$45.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-disponible">En Stock</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD007')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD007')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="producto-card" data-categoria="Gaming" data-marca="Apple" data-precio="180">
                        <div class="producto-imagen">
                            <div class="placeholder-producto">🎮</div>
                        </div>
                        <div class="producto-info">
                            <h3>Control Gaming Wireless</h3>
                            <p class="producto-sku">SKU: CON008</p>
                            <div class="producto-precio">
                                <span class="precio-actual">$180.00 MXN</span>
                            </div>
                            <div class="producto-stock">
                                <span class="stock-pocas">Pocas Unidades</span>
                            </div>
                            <div class="producto-acciones">
                                <button class="btn btn-secondary" onclick="verDetalleProducto('PROD008')">
                                    Ver Detalles
                                </button>
                                <button class="btn btn-primary" onclick="agregarAlCarrito('PROD008')">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vista de Detalle de Producto -->
            <div class="detalle-producto" id="detalleProducto" style="display: none;">
                <div class="detalle-header">
                    <button class="btn btn-secondary" onclick="volverACatalogo()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al Catálogo
                    </button>
                    <h2 id="detalleProductoNombre">Detalle del Producto</h2>
                </div>

                <div class="detalle-content">
                    <div class="detalle-imagenes">
                        <div class="imagen-principal">
                            <div class="placeholder-producto-grande" id="imagenPrincipal">💻</div>
                        </div>
                        <div class="imagenes-miniaturas">
                            <div class="miniatura active" onclick="cambiarImagen(0)">
                                <div class="placeholder-miniatura">💻</div>
                            </div>
                            <div class="miniatura" onclick="cambiarImagen(1)">
                                <div class="placeholder-miniatura">📱</div>
                            </div>
                            <div class="miniatura" onclick="cambiarImagen(2)">
                                <div class="placeholder-miniatura">🔧</div>
                            </div>
                        </div>
                    </div>

                    <div class="detalle-info">
                        <h1 id="detalleProductoTitulo">Laptop Ultraligera X200</h1>
                        <p class="detalle-sku" id="detalleProductoSku">SKU: LAP001</p>
                        
                        <div class="detalle-precio">
                            <span class="precio-original" id="detallePrecioOriginal">$1,400.00</span>
                            <span class="precio-actual" id="detallePrecioActual">$1,200.00 MXN</span>
                        </div>
                        
                        <div class="detalle-stock">
                            <span class="stock-disponible" id="detalleStock">50 Unidades disponibles</span>
                        </div>
                        
                        <div class="detalle-descripcion">
                            <h3>Descripción</h3>
                            <p id="detalleDescripcion">
                                Laptop ultraligera con procesador Intel i7 de última generación, 
                                16GB de RAM, SSD de 512GB y pantalla Full HD de 14 pulgadas. 
                                Perfecta para trabajo y entretenimiento. Incluye Windows 11 Pro 
                                y garantía de 2 años.
                            </p>
                        </div>
                        
                        <div class="detalle-especificaciones">
                            <h3>Especificaciones</h3>
                            <ul>
                                <li><strong>Procesador:</strong> Intel Core i7-1165G7</li>
                                <li><strong>Memoria:</strong> 16GB DDR4</li>
                                <li><strong>Almacenamiento:</strong> 512GB SSD</li>
                                <li><strong>Pantalla:</strong> 14" Full HD (1920x1080)</li>
                                <li><strong>Sistema Operativo:</strong> Windows 11 Pro</li>
                                <li><strong>Peso:</strong> 1.2 kg</li>
                            </ul>
                        </div>
                        
                        <div class="detalle-compra">
                            <div class="cantidad-selector">
                                <label for="cantidadProducto">Cantidad:</label>
                                <div class="cantidad-controls">
                                    <button onclick="cambiarCantidad(-1)">-</button>
                                    <input type="number" id="cantidadProducto" value="1" min="1" max="50">
                                    <button onclick="cambiarCantidad(1)">+</button>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary btn-lg" onclick="agregarAlCarritoDetalle()">
                                <i class="fas fa-cart-plus"></i>
                                Agregar al Carrito
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Productos Relacionados -->
                <div class="productos-relacionados">
                    <h3>Productos Relacionados</h3>
                    <div class="productos-relacionados-grid">
                        <div class="producto-card-mini">
                            <div class="producto-imagen-mini">
                                <div class="placeholder-producto-mini">🖥️</div>
                            </div>
                            <div class="producto-info-mini">
                                <h4>Monitor Curvo 27"</h4>
                                <span class="precio-actual">$350.00 MXN</span>
                            </div>
                        </div>
                        <div class="producto-card-mini">
                            <div class="producto-imagen-mini">
                                <div class="placeholder-producto-mini">⌨️</div>
                            </div>
                            <div class="producto-info-mini">
                                <h4>Teclado Mecánico RGB</h4>
                                <span class="precio-actual">$120.00 MXN</span>
                            </div>
                        </div>
                        <div class="producto-card-mini">
                            <div class="producto-imagen-mini">
                                <div class="placeholder-producto-mini">🖱️</div>
                            </div>
                            <div class="producto-info-mini">
                                <h4>Mouse Gaming Pro</h4>
                                <span class="precio-actual">$85.00 MXN</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Carrito de Compras -->
            <div class="carrito-container" id="carritoContainer" style="display: none;">
                <div class="carrito-header">
                    <button class="btn btn-secondary" onclick="volverACatalogo()">
                        <i class="fas fa-arrow-left"></i>
                        Continuar Comprando
                    </button>
                    <h2>Mi Carrito</h2>
                </div>

                <div class="carrito-content">
                    <div class="carrito-productos" id="carritoProductos">
                        <!-- Los productos del carrito se cargarán dinámicamente -->
                    </div>

                    <div class="carrito-resumen">
                        <h3>Resumen del Pedido</h3>
                        <div class="resumen-item">
                            <span>Subtotal:</span>
                            <span id="carritoSubtotal">$0.00 MXN</span>
                        </div>
                        <div class="resumen-item">
                            <span>Envío:</span>
                            <span id="carritoEnvio">$150.00 MXN</span>
                        </div>
                        <div class="resumen-item total">
                            <span>Total:</span>
                            <span id="carritoTotal">$0.00 MXN</span>
                        </div>
                        
                        <button class="btn btn-primary btn-lg" onclick="iniciarCheckout()">
                            <i class="fas fa-credit-card"></i>
                            Proceder al Pago
                        </button>
                    </div>
                </div>
            </div>

            <!-- Checkout - Paso 1: Información de Envío -->
            <div class="checkout-container" id="checkoutContainer" style="display: none;">
                <div class="checkout-header">
                    <button class="btn btn-secondary" onclick="volverAlCarrito()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al Carrito
                    </button>
                    <h2>Checkout - Información de Envío</h2>
                </div>

                <div class="checkout-steps">
                    <div class="step active">1. Envío</div>
                    <div class="step">2. Pago</div>
                    <div class="step">3. Confirmación</div>
                </div>

                <div class="checkout-content">
                    <form class="checkout-form" id="checkoutForm">
                        <div class="form-section">
                            <h3>Información de Contacto</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="checkoutNombre">Nombre Completo *</label>
                                    <input type="text" id="checkoutNombre" name="nombre" required>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutEmail">Email *</label>
                                    <input type="email" id="checkoutEmail" name="email" required>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutTelefono">Teléfono *</label>
                                    <input type="tel" id="checkoutTelefono" name="telefono" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Dirección de Envío</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="checkoutDireccion">Dirección *</label>
                                    <input type="text" id="checkoutDireccion" name="direccion" required>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutCiudad">Ciudad *</label>
                                    <input type="text" id="checkoutCiudad" name="ciudad" required>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutEstado">Estado *</label>
                                    <input type="text" id="checkoutEstado" name="estado" required>
                                </div>
                                <div class="form-group">
                                    <label for="checkoutCP">Código Postal *</label>
                                    <input type="text" id="checkoutCP" name="codigoPostal" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Resumen del Pedido</h3>
                            <div class="checkout-resumen" id="checkoutResumen">
                                <!-- El resumen se cargará dinámicamente -->
                            </div>
                        </div>

                        <div class="checkout-actions">
                            <button type="button" class="btn btn-secondary" onclick="volverAlCarrito()">
                                Volver al Carrito
                            </button>
                            <button type="submit" class="btn btn-primary">
                                Continuar al Pago
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Checkout - Paso 2: Información de Pago -->
            <div class="checkout-pago-container" id="checkoutPagoContainer" style="display: none;">
                <div class="checkout-header">
                    <button class="btn btn-secondary" onclick="volverAEnvio()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a Envío
                    </button>
                    <h2>Checkout - Información de Pago</h2>
                </div>

                <div class="checkout-steps">
                    <div class="step completed">1. Envío</div>
                    <div class="step active">2. Pago</div>
                    <div class="step">3. Confirmación</div>
                </div>

                <div class="checkout-content">
                    <div class="metodos-pago">
                        <h3>Método de Pago</h3>
                        
                        <div class="metodo-pago-option">
                            <input type="radio" id="pagoTarjeta" name="metodoPago" value="tarjeta" checked>
                            <label for="pagoTarjeta">
                                <i class="fas fa-credit-card"></i>
                                Pagar con Tarjeta de Crédito/Débito
                            </label>
                        </div>
                        
                        <div class="metodo-pago-option">
                            <input type="radio" id="pagoCredito" name="metodoPago" value="credito">
                            <label for="pagoCredito">
                                <i class="fas fa-handshake"></i>
                                Pagar con Crédito (Cliente con Línea de Crédito)
                            </label>
                        </div>
                    </div>

                    <div class="formulario-tarjeta" id="formularioTarjeta">
                        <h3>Información de la Tarjeta</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="numeroTarjeta">Número de Tarjeta *</label>
                                <input type="text" id="numeroTarjeta" name="numeroTarjeta" placeholder="1234 5678 9012 3456" maxlength="19">
                            </div>
                            <div class="form-group">
                                <label for="nombreTarjeta">Nombre en la Tarjeta *</label>
                                <input type="text" id="nombreTarjeta" name="nombreTarjeta">
                            </div>
                            <div class="form-group">
                                <label for="fechaTarjeta">Fecha de Vencimiento *</label>
                                <input type="text" id="fechaTarjeta" name="fechaTarjeta" placeholder="MM/AA" maxlength="5">
                            </div>
                            <div class="form-group">
                                <label for="cvvTarjeta">CVV *</label>
                                <input type="text" id="cvvTarjeta" name="cvvTarjeta" placeholder="123" maxlength="4">
                            </div>
                        </div>
                    </div>

                    <div class="checkout-resumen-final">
                        <h3>Resumen Final</h3>
                        <div class="resumen-final" id="resumenFinal">
                            <!-- El resumen final se cargará dinámicamente -->
                        </div>
                        
                        <button class="btn btn-primary btn-lg" onclick="confirmarPedido()">
                            <i class="fas fa-check"></i>
                            Confirmar Pedido
                        </button>
                    </div>
                </div>
            </div>

            <!-- Checkout - Paso 3: Confirmación -->
            <div class="checkout-confirmacion-container" id="checkoutConfirmacionContainer" style="display: none;">
                <div class="confirmacion-content">
                    <div class="confirmacion-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>¡Gracias por tu compra!</h2>
                    <p>Tu pedido ha sido confirmado exitosamente.</p>
                    
                    <div class="confirmacion-details">
                        <div class="detail-item">
                            <label>Número de Pedido:</label>
                            <span id="numeroPedidoConfirmacion">P0017</span>
                        </div>
                        <div class="detail-item">
                            <label>Fecha de Pedido:</label>
                            <span id="fechaPedidoConfirmacion">22 de Julio, 2025</span>
                        </div>
                        <div class="detail-item">
                            <label>Total Pagado:</label>
                            <span id="totalPedidoConfirmacion">$1,350.00 MXN</span>
                        </div>
                        <div class="detail-item">
                            <label>Fecha Estimada de Entrega:</label>
                            <span id="fechaEntregaConfirmacion">25 de Julio, 2025</span>
                        </div>
                    </div>
                    
                    <div class="confirmacion-actions">
                        <button class="btn btn-primary" onclick="verMisPedidos()">
                            <i class="fas fa-list"></i>
                            Ver Mis Pedidos
                        </button>
                        <button class="btn btn-secondary" onclick="volverACatalogo()">
                            <i class="fas fa-home"></i>
                            Volver al Catálogo
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mi Cuenta / Historial de Pedidos -->
            <div class="mi-cuenta-container" id="miCuentaContainer" style="display: none;">
                <div class="cuenta-header">
                    <button class="btn btn-secondary" onclick="volverACatalogo()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al Catálogo
                    </button>
                    <h2>Mi Cuenta</h2>
                </div>

                <div class="cuenta-content">
                    <div class="cuenta-info">
                        <h3>Información Personal</h3>
                        <div class="info-item">
                            <label>Nombre:</label>
                            <span>Juan Pérez</span>
                        </div>
                        <div class="info-item">
                            <label>Email:</label>
                            <span>juan.perez@email.com</span>
                        </div>
                        <div class="info-item">
                            <label>Teléfono:</label>
                            <span>+52 55 1234 5678</span>
                        </div>
                        <div class="info-item">
                            <label>Dirección:</label>
                            <span>Calle Mayor 123, Centro, CDMX</span>
                        </div>
                    </div>

                    <div class="mis-pedidos">
                        <h3>Mis Pedidos</h3>
                        <div class="pedidos-lista" id="pedidosLista">
                            <div class="pedido-item">
                                <div class="pedido-info">
                                    <h4>Pedido #P0017</h4>
                                    <p>22 de Julio, 2025</p>
                                    <span class="estado-pedido entregado">Entregado</span>
                                </div>
                                <div class="pedido-total">
                                    <span>$1,350.00 MXN</span>
                                    <button class="btn btn-sm btn-secondary" onclick="verDetallePedidoCliente('P0017')">
                                        Ver Detalles
                                    </button>
                                </div>
                            </div>
                            
                            <div class="pedido-item">
                                <div class="pedido-info">
                                    <h4>Pedido #P0016</h4>
                                    <p>20 de Julio, 2025</p>
                                    <span class="estado-pedido enviado">Enviado</span>
                                </div>
                                <div class="pedido-total">
                                    <span>$850.00 MXN</span>
                                    <button class="btn btn-sm btn-secondary" onclick="verDetallePedidoCliente('P0016')">
                                        Ver Detalles
                                    </button>
                                </div>
                            </div>
                            
                            <div class="pedido-item">
                                <div class="pedido-info">
                                    <h4>Pedido #P0015</h4>
                                    <p>18 de Julio, 2025</p>
                                    <span class="estado-pedido proceso">En Proceso</span>
                                </div>
                                <div class="pedido-total">
                                    <span>$2,100.00 MXN</span>
                                    <button class="btn btn-sm btn-secondary" onclick="verDetallePedidoCliente('P0015')">
                                        Ver Detalles
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detalle de Pedido del Cliente -->
            <div class="detalle-pedido-cliente" id="detallePedidoCliente" style="display: none;">
                <div class="detalle-pedido-header">
                    <button class="btn btn-secondary" onclick="volverAMiCuenta()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a Mi Cuenta
                    </button>
                    <h2 id="detallePedidoTitulo">Detalle del Pedido #P0017</h2>
                </div>

                <div class="detalle-pedido-content">
                    <div class="pedido-resumen">
                        <div class="resumen-item">
                            <label>Estado:</label>
                            <span class="estado-pedido entregado" id="detallePedidoEstado">Entregado</span>
                        </div>
                        <div class="resumen-item">
                            <label>Fecha de Pedido:</label>
                            <span id="detallePedidoFecha">22 de Julio, 2025</span>
                        </div>
                        <div class="resumen-item">
                            <label>Total:</label>
                            <span id="detallePedidoTotal">$1,350.00 MXN</span>
                        </div>
                        <div class="resumen-item">
                            <label>Dirección de Envío:</label>
                            <span id="detallePedidoDireccion">Calle Mayor 123, Centro, CDMX</span>
                        </div>
                    </div>

                    <div class="pedido-productos">
                        <h3>Productos Comprados</h3>
                        <div class="productos-pedido" id="productosPedido">
                            <div class="producto-pedido-item">
                                <div class="producto-pedido-imagen">
                                    <div class="placeholder-producto-mini">💻</div>
                                </div>
                                <div class="producto-pedido-info">
                                    <h4>Laptop Ultraligera X200</h4>
                                    <p>Cantidad: 1</p>
                                    <span class="precio-producto">$1,200.00 MXN</span>
                                </div>
                            </div>
                            
                            <div class="producto-pedido-item">
                                <div class="producto-pedido-imagen">
                                    <div class="placeholder-producto-mini">🖥️</div>
                                </div>
                                <div class="producto-pedido-info">
                                    <h4>Monitor Curvo 27"</h4>
                                    <p>Cantidad: 1</p>
                                    <span class="precio-producto">$350.00 MXN</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pedido-seguimiento">
                        <h3>Seguimiento del Pedido</h3>
                        <div class="seguimiento-timeline">
                            <div class="timeline-item completed">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4>Pedido Recibido</h4>
                                    <p>22 de Julio, 2025 - 10:30 AM</p>
                                </div>
                            </div>
                            
                            <div class="timeline-item completed">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4>Preparando Envío</h4>
                                    <p>22 de Julio, 2025 - 2:15 PM</p>
                                </div>
                            </div>
                            
                            <div class="timeline-item completed">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4>En Camino</h4>
                                    <p>23 de Julio, 2025 - 9:00 AM</p>
                                </div>
                            </div>
                            
                            <div class="timeline-item completed">
                                <div class="timeline-icon">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="timeline-content">
                                    <h4>Entregado</h4>
                                    <p>23 de Julio, 2025 - 3:45 PM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal de Login -->
            <div class="modal" id="modalLogin">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Iniciar Sesión</h3>
                        <button class="modal-close" onclick="cerrarModalLogin()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="login-form" id="loginForm">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <input type="email" id="loginEmail" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Contraseña</label>
                                <input type="password" id="loginPassword" name="password" required>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                                <button type="button" class="btn btn-secondary" onclick="mostrarRegistro()">
                                    Crear Cuenta
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Modal de Registro -->
            <div class="modal" id="modalRegistro">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Crear Cuenta</h3>
                        <button class="modal-close" onclick="cerrarModalRegistro()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="registro-form" id="registroForm">
                            <div class="form-group">
                                <label for="registroNombre">Nombre Completo</label>
                                <input type="text" id="registroNombre" name="nombre" required>
                            </div>
                            <div class="form-group">
                                <label for="registroEmail">Email</label>
                                <input type="email" id="registroEmail" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="registroPassword">Contraseña</label>
                                <input type="password" id="registroPassword" name="password" required>
                            </div>
                            <div class="form-group">
                                <label for="registroConfirmPassword">Confirmar Contraseña</label>
                                <input type="password" id="registroConfirmPassword" name="confirmPassword" required>
                            </div>
                            <div class="form-group">
                                <label for="registroDireccion">Dirección (Opcional)</label>
                                <textarea id="registroDireccion" name="direccion" rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Crear Cuenta</button>
                                <button type="button" class="btn btn-secondary" onclick="mostrarLogin()">
                                    Ya tengo cuenta
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cuentas por Cobrar Section -->
        <section id="cuentas-cobrar" class="section">
            <div class="section-header">
                <h1>Gestión de Cuentas por Cobrar y Facturación</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevaFactura">
                        <i class="fas fa-plus"></i>
                        Nueva Factura
                    </button>
                    <button class="btn btn-secondary" id="btnExportarFacturas">
                        <i class="fas fa-download"></i>
                        Exportar
                    </button>
                </div>
            </div>

            <!-- Vista Principal de Listado de Facturas -->
            <div class="facturas-container" id="facturasContainer">
                <div class="search-filters">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar por No. Factura o Cliente..." id="searchFacturas">
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="filterEstadoFactura">
                            <option value="">Todos los estados</option>
                            <option value="Pendiente">Pendiente</option>
                            <option value="Parcialmente Pagada">Parcialmente Pagada</option>
                            <option value="Pagada">Pagada</option>
                            <option value="Vencida">Vencida</option>
                            <option value="Cancelada">Cancelada</option>
                        </select>
                        <select class="filter-select" id="filterFechaEmision">
                            <option value="">Todas las fechas</option>
                            <option value="hoy">Hoy</option>
                            <option value="semana">Esta semana</option>
                            <option value="mes">Este mes</option>
                            <option value="vencidas">Vencidas</option>
                        </select>
                    </div>
                </div>

                <!-- Vista Web - Tabla -->
                <div class="table-container" id="facturasTableContainer">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>No. Factura</th>
                                <th>No. Pedido</th>
                                <th>Cliente</th>
                                <th>Fecha Emisión</th>
                                <th>Fecha Vencimiento</th>
                                <th>Monto Total</th>
                                <th>Saldo Pendiente</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-factura-id="FAC001">
                                <td><span class="factura-id">FAC001</span></td>
                                <td><span class="pedido-id">P0010</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=D" alt="Cliente">
                                        <div>
                                            <div class="client-name">Distribuidora El Sol S.A.</div>
                                            <div class="client-company">Juan Pérez</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-20</td>
                                <td>2025-02-20</td>
                                <td>€1,500.00</td>
                                <td class="saldo-pendiente">€1,500.00</td>
                                <td><span class="status pending">Pendiente</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC001')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC001')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio" onclick="enviarRecordatorio('FAC001')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC001')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC002">
                                <td><span class="factura-id">FAC002</span></td>
                                <td><span class="pedido-id">P0011</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/10B981/FFFFFF?text=P" alt="Cliente">
                                        <div>
                                            <div class="client-name">Panadería La Espiga</div>
                                            <div class="client-company">María López</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-22</td>
                                <td>2025-02-22</td>
                                <td>€850.50</td>
                                <td class="saldo-pendiente">€425.25</td>
                                <td><span class="status partial">Parcialmente Pagada</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC002')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC002')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio" onclick="enviarRecordatorio('FAC002')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC002')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC003">
                                <td><span class="factura-id">FAC003</span></td>
                                <td><span class="pedido-id">P0012</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/F59E0B/FFFFFF?text=F" alt="Cliente">
                                        <div>
                                            <div class="client-name">Ferretería Central</div>
                                            <div class="client-company">Carlos Ruiz</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-23</td>
                                <td>2025-02-23</td>
                                <td>€2,300.00</td>
                                <td class="saldo-pendiente">€0.00</td>
                                <td><span class="status completed">Pagada</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC003')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Imprimir" onclick="imprimirFactura('FAC003')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar por Email" onclick="enviarFacturaEmail('FAC003')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC004">
                                <td><span class="factura-id">FAC004</span></td>
                                <td><span class="pedido-id">P0013</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/EF4444/FFFFFF?text=S" alt="Cliente">
                                        <div>
                                            <div class="client-name">Supermercado Mega</div>
                                            <div class="client-company">Juan Pérez</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-15</td>
                                <td>2025-02-15</td>
                                <td>€1,750.00</td>
                                <td class="saldo-pendiente">€1,750.00</td>
                                <td><span class="status overdue">Vencida</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC004')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC004')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio Urgente" onclick="enviarRecordatorioUrgente('FAC004')">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC004')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC005">
                                <td><span class="factura-id">FAC005</span></td>
                                <td><span class="pedido-id">P0014</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/8B5CF6/FFFFFF?text=R" alt="Cliente">
                                        <div>
                                            <div class="client-name">Restaurante El Patio</div>
                                            <div class="client-company">María López</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-25</td>
                                <td>2025-02-25</td>
                                <td>€950.00</td>
                                <td class="saldo-pendiente">€950.00</td>
                                <td><span class="status pending">Pendiente</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC005')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC005')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio" onclick="enviarRecordatorio('FAC005')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC005')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC006">
                                <td><span class="factura-id">FAC006</span></td>
                                <td><span class="pedido-id">P0015</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/4F46E5/FFFFFF?text=D" alt="Cliente">
                                        <div>
                                            <div class="client-name">Distribuidora El Sol S.A.</div>
                                            <div class="client-company">Juan Pérez</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-18</td>
                                <td>2025-02-18</td>
                                <td>€3,200.00</td>
                                <td class="saldo-pendiente">€0.00</td>
                                <td><span class="status completed">Pagada</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC006')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Imprimir" onclick="imprimirFactura('FAC006')">
                                            <i class="fas fa-print"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar por Email" onclick="enviarFacturaEmail('FAC006')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC007">
                                <td><span class="factura-id">FAC007</span></td>
                                <td><span class="pedido-id">P0016</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/10B981/FFFFFF?text=P" alt="Cliente">
                                        <div>
                                            <div class="client-name">Panadería La Espiga</div>
                                            <div class="client-company">María López</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-10</td>
                                <td>2025-02-10</td>
                                <td>€1,200.00</td>
                                <td class="saldo-pendiente">€1,200.00</td>
                                <td><span class="status overdue">Vencida</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC007')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC007')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio Urgente" onclick="enviarRecordatorioUrgente('FAC007')">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC007')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-factura-id="FAC008">
                                <td><span class="factura-id">FAC008</span></td>
                                <td><span class="pedido-id">P0017</span></td>
                                <td>
                                    <div class="client-info">
                                        <img src="https://via.placeholder.com/32x32/F59E0B/FFFFFF?text=F" alt="Cliente">
                                        <div>
                                            <div class="client-name">Ferretería Central</div>
                                            <div class="client-company">Carlos Ruiz</div>
                                        </div>
                                    </div>
                                </td>
                                <td>2025-01-28</td>
                                <td>2025-02-28</td>
                                <td>€1,800.00</td>
                                <td class="saldo-pendiente">€900.00</td>
                                <td><span class="status partial">Parcialmente Pagada</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleFactura('FAC008')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Registrar Pago" onclick="registrarPagoFactura('FAC008')">
                                            <i class="fas fa-credit-card"></i>
                                        </button>
                                        <button class="action-btn" title="Enviar Recordatorio" onclick="enviarRecordatorio('FAC008')">
                                            <i class="fas fa-envelope"></i>
                                        </button>
                                        <button class="action-btn" title="Generar Nota de Crédito" onclick="generarNotaCredito('FAC008')">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Vista Móvil - Lista de Tarjetas -->
                <div class="facturas-mobile" id="facturasMobile" style="display: none;">
                    <div class="factura-card" data-factura-id="FAC001">
                        <div class="factura-header">
                            <div class="factura-info">
                                <h4>FAC001</h4>
                                <span class="status pending">Pendiente</span>
                            </div>
                            <div class="factura-amount">
                                <span class="amount">€1,500.00</span>
                                <span class="pending">Pendiente: €1,500.00</span>
                            </div>
                        </div>
                        <div class="factura-details">
                            <p><strong>Cliente:</strong> Distribuidora El Sol S.A.</p>
                            <p><strong>Pedido:</strong> P0010</p>
                            <p><strong>Emisión:</strong> 2025-01-20</p>
                            <p><strong>Vencimiento:</strong> 2025-02-20</p>
                        </div>
                        <div class="factura-actions">
                            <button class="btn btn-sm btn-primary" onclick="verDetalleFactura('FAC001')">
                                <i class="fas fa-eye"></i> Ver
                            </button>
                            <button class="btn btn-sm btn-success" onclick="registrarPagoFactura('FAC001')">
                                <i class="fas fa-credit-card"></i> Pagar
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="enviarRecordatorio('FAC001')">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    </div>

                    <div class="factura-card" data-factura-id="FAC002">
                        <div class="factura-header">
                            <div class="factura-info">
                                <h4>FAC002</h4>
                                <span class="status partial">Parcialmente Pagada</span>
                            </div>
                            <div class="factura-amount">
                                <span class="amount">€850.50</span>
                                <span class="pending">Pendiente: €425.25</span>
                            </div>
                        </div>
                        <div class="factura-details">
                            <p><strong>Cliente:</strong> Panadería La Espiga</p>
                            <p><strong>Pedido:</strong> P0011</p>
                            <p><strong>Emisión:</strong> 2025-01-22</p>
                            <p><strong>Vencimiento:</strong> 2025-02-22</p>
                        </div>
                        <div class="factura-actions">
                            <button class="btn btn-sm btn-primary" onclick="verDetalleFactura('FAC002')">
                                <i class="fas fa-eye"></i> Ver
                            </button>
                            <button class="btn btn-sm btn-success" onclick="registrarPagoFactura('FAC002')">
                                <i class="fas fa-credit-card"></i> Pagar
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="enviarRecordatorio('FAC002')">
                                <i class="fas fa-envelope"></i>
                            </button>
                        </div>
                    </div>

                    <div class="factura-card" data-factura-id="FAC003">
                        <div class="factura-header">
                            <div class="factura-info">
                                <h4>FAC003</h4>
                                <span class="status completed">Pagada</span>
                            </div>
                            <div class="factura-amount">
                                <span class="amount">€2,300.00</span>
                                <span class="paid">Pagado: €2,300.00</span>
                            </div>
                        </div>
                        <div class="factura-details">
                            <p><strong>Cliente:</strong> Ferretería Central</p>
                            <p><strong>Pedido:</strong> P0012</p>
                            <p><strong>Emisión:</strong> 2025-01-23</p>
                            <p><strong>Vencimiento:</strong> 2025-02-23</p>
                        </div>
                        <div class="factura-actions">
                            <button class="btn btn-sm btn-primary" onclick="verDetalleFactura('FAC003')">
                                <i class="fas fa-eye"></i> Ver
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="imprimirFactura('FAC003')">
                                <i class="fas fa-print"></i> Imprimir
                            </button>
                        </div>
                    </div>

                    <div class="factura-card" data-factura-id="FAC004">
                        <div class="factura-header">
                            <div class="factura-info">
                                <h4>FAC004</h4>
                                <span class="status overdue">Vencida</span>
                            </div>
                            <div class="factura-amount">
                                <span class="amount">€1,750.00</span>
                                <span class="pending">Pendiente: €1,750.00</span>
                            </div>
                        </div>
                        <div class="factura-details">
                            <p><strong>Cliente:</strong> Supermercado Mega</p>
                            <p><strong>Pedido:</strong> P0013</p>
                            <p><strong>Emisión:</strong> 2025-01-15</p>
                            <p><strong>Vencimiento:</strong> 2025-02-15</p>
                        </div>
                        <div class="factura-actions">
                            <button class="btn btn-sm btn-primary" onclick="verDetalleFactura('FAC004')">
                                <i class="fas fa-eye"></i> Ver
                            </button>
                            <button class="btn btn-sm btn-success" onclick="registrarPagoFactura('FAC004')">
                                <i class="fas fa-credit-card"></i> Pagar
                            </button>
                            <button class="btn btn-sm btn-warning" onclick="enviarRecordatorioUrgente('FAC004')">
                                <i class="fas fa-exclamation-triangle"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulario de Nueva Factura (Oculto por defecto) -->
            <div class="formulario-factura" id="formularioFactura" style="display: none;">
                <div class="formulario-header">
                    <button class="btn btn-secondary" onclick="cancelarFormularioFactura()">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <h2 id="formularioFacturaTitulo">Nueva Factura</h2>
                </div>

                <form class="factura-form" id="facturaForm">
                    <!-- Opciones de Creación -->
                    <div class="creacion-opciones">
                        <h3>Método de Creación</h3>
                        <div class="opciones-radio">
                            <div class="opcion-radio">
                                <input type="radio" id="crearDesdePedido" name="metodoCreacion" value="pedido" checked>
                                <label for="crearDesdePedido">
                                    <i class="fas fa-shopping-cart"></i>
                                    <span>Generar desde Pedido Existente</span>
                                </label>
                            </div>
                            <div class="opcion-radio">
                                <input type="radio" id="crearManual" name="metodoCreacion" value="manual">
                                <label for="crearManual">
                                    <i class="fas fa-edit"></i>
                                    <span>Crear Factura Manualmente</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Búsqueda de Pedido -->
                    <div class="pedido-busqueda" id="pedidoBusqueda">
                        <div class="form-group">
                            <label for="pedidoFactura">Buscar Pedido</label>
                            <div class="pedido-search-container">
                                <input type="text" id="pedidoFactura" name="pedidoFactura" placeholder="Ingrese No. de Pedido...">
                                <button type="button" class="btn btn-secondary" onclick="buscarPedido()">
                                    <i class="fas fa-search"></i>
                                    Buscar
                                </button>
                            </div>
                        </div>
                        
                        <div class="pedido-resumen" id="pedidoResumen" style="display: none;">
                            <h4>Resumen del Pedido</h4>
                            <div class="pedido-info-card">
                                <div class="pedido-details">
                                    <h5 id="pedidoCliente">Cliente del Pedido</h5>
                                    <p id="pedidoFecha">Fecha: 2025-01-20</p>
                                    <p id="pedidoTotal">Total: €1,500.00</p>
                                </div>
                                <div class="pedido-products">
                                    <h6>Productos:</h6>
                                    <ul id="pedidoProductos">
                                        <li>Producto A - 2 unidades - €750.00</li>
                                        <li>Producto B - 1 unidad - €750.00</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Información de Factura -->
                    <div class="factura-info-section">
                        <h3>Información de Factura</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="clienteFactura">Cliente *</label>
                                <div class="cliente-search-container">
                                    <input type="text" id="clienteFactura" name="clienteFactura" placeholder="Buscar cliente..." required>
                                    <div class="cliente-suggestions" id="clienteFacturaSuggestions" style="display: none;">
                                        <!-- Las sugerencias se cargarán dinámicamente -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="fechaEmision">Fecha de Emisión</label>
                                <input type="date" id="fechaEmision" name="fechaEmision" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="fechaVencimiento">Fecha de Vencimiento</label>
                                <input type="date" id="fechaVencimiento" name="fechaVencimiento" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="condicionesPago">Condiciones de Pago</label>
                                <select id="condicionesPago" name="condicionesPago">
                                    <option value="Contado">Contado</option>
                                    <option value="Crédito 15 días">Crédito 15 días</option>
                                    <option value="Crédito 30 días" selected>Crédito 30 días</option>
                                    <option value="Crédito 60 días">Crédito 60 días</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Productos/Servicios -->
                    <div class="productos-factura">
                        <h3>Productos/Servicios Facturados</h3>
                        <div class="producto-agregar">
                            <div class="form-group">
                                <label for="productoFactura">Producto/Servicio</label>
                                <input type="text" id="productoFactura" name="productoFactura" placeholder="Descripción del producto o servicio">
                            </div>
                            <div class="form-group">
                                <label for="cantidadFactura">Cantidad</label>
                                <input type="number" id="cantidadFactura" name="cantidadFactura" min="1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="precioUnitario">Precio Unitario</label>
                                <input type="number" id="precioUnitario" name="precioUnitario" min="0" step="0.01" placeholder="0.00">
                            </div>
                            <div class="form-group">
                                <label for="totalLinea">Total Línea</label>
                                <input type="number" id="totalLinea" name="totalLinea" min="0" step="0.01" readonly>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="agregarItemFactura()">
                                <i class="fas fa-plus"></i> Agregar
                            </button>
                        </div>
                        
                        <div class="productos-lista">
                            <table class="data-table" id="productosFacturaTable">
                                <thead>
                                    <tr>
                                        <th>Descripción</th>
                                        <th>Cantidad</th>
                                        <th>Precio Unitario</th>
                                        <th>Total</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="productosFacturaTableBody">
                                    <!-- Los productos se agregarán dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="factura-totales">
                            <div class="total-item">
                                <span>Subtotal:</span>
                                <span id="subtotalFactura">€0.00</span>
                            </div>
                            <div class="total-item">
                                <span>IVA (16%):</span>
                                <span id="ivaFactura">€0.00</span>
                            </div>
                            <div class="total-item total-final">
                                <span>Total:</span>
                                <span id="totalFactura">€0.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Notas y Observaciones -->
                    <div class="form-group full-width">
                        <label for="notasFactura">Notas/Observaciones</label>
                        <textarea id="notasFactura" name="notasFactura" rows="3" placeholder="Información adicional sobre la factura..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="cancelarFormularioFactura()">
                            Cancelar
                        </button>
                        <button type="button" class="btn btn-primary" onclick="guardarBorradorFactura()">
                            <i class="fas fa-save"></i>
                            Guardar Borrador
                        </button>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-check"></i>
                            Emitir Factura
                        </button>
                    </div>
                </form>
            </div>

            <!-- Vista de Detalle de Factura (Oculta por defecto) -->
            <div class="factura-detalle" id="facturaDetalle" style="display: none;">
                <div class="detalle-header">
                    <button class="btn btn-secondary" onclick="volverAFacturas()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a Facturas
                    </button>
                    <h2 id="detalleFacturaTitulo">Detalle de Factura FAC001</h2>
                    <div class="detalle-actions">
                        <button class="btn btn-primary" onclick="registrarPagoDesdeDetalle()">
                            <i class="fas fa-credit-card"></i>
                            Registrar Pago
                        </button>
                        <button class="btn btn-secondary" onclick="enviarFacturaEmail()">
                            <i class="fas fa-envelope"></i>
                            Enviar por Email
                        </button>
                        <button class="btn btn-secondary" onclick="imprimirFacturaDesdeDetalle()">
                            <i class="fas fa-print"></i>
                            Imprimir
                        </button>
                    </div>
                </div>

                <div class="detalle-content">
                    <!-- Sección 1: Encabezado y Estado -->
                    <div class="detalle-section">
                        <div class="factura-estado">
                            <div class="estado-info">
                                <h3>FAC001</h3>
                                <span class="status pending">Pendiente</span>
                            </div>
                            <div class="montos-info">
                                <div class="monto-item">
                                    <label>Monto Total:</label>
                                    <span class="monto-total">€1,500.00</span>
                                </div>
                                <div class="monto-item">
                                    <label>Saldo Pendiente:</label>
                                    <span class="saldo-pendiente">€1,500.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 2: Información General -->
                    <div class="detalle-section">
                        <h3>Información General</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Cliente:</label>
                                <span><a href="#" onclick="verCliente('C001')">Distribuidora El Sol S.A.</a></span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Emisión:</label>
                                <span>2025-01-20</span>
                            </div>
                            <div class="info-item">
                                <label>Fecha de Vencimiento:</label>
                                <span>2025-02-20</span>
                            </div>
                            <div class="info-item">
                                <label>Condiciones de Pago:</label>
                                <span>Crédito 30 días</span>
                            </div>
                            <div class="info-item">
                                <label>Pedido Relacionado:</label>
                                <span><a href="#" onclick="verPedido('P0010')">P0010</a></span>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 3: Ítems Facturados -->
                    <div class="detalle-section">
                        <h3>Ítems Facturados</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Descripción</th>
                                        <th>Cantidad</th>
                                        <th>Precio Unitario</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Harina Premium 25kg</td>
                                        <td>2</td>
                                        <td>€500.00</td>
                                        <td>€1,000.00</td>
                                    </tr>
                                    <tr>
                                        <td>Aceite de Oliva Extra Virgen 1L</td>
                                        <td>5</td>
                                        <td>€100.00</td>
                                        <td>€500.00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="factura-totales-detalle">
                            <div class="total-item">
                                <span>Subtotal:</span>
                                <span>€1,500.00</span>
                            </div>
                            <div class="total-item">
                                <span>IVA (16%):</span>
                                <span>€240.00</span>
                            </div>
                            <div class="total-item total-final">
                                <span>Total:</span>
                                <span>€1,740.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 4: Historial de Pagos -->
                    <div class="detalle-section">
                        <h3>Historial de Pagos</h3>
                        <div class="pagos-container">
                            <div class="pago-item">
                                <div class="pago-info">
                                    <div class="pago-fecha">2025-01-25</div>
                                    <div class="pago-monto">€500.00</div>
                                    <div class="pago-metodo">Transferencia Bancaria</div>
                                    <div class="pago-referencia">Ref: TRX-2025-001</div>
                                </div>
                                <div class="pago-actions">
                                    <button class="btn btn-sm btn-secondary" title="Ver Comprobante">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 5: Acciones Adicionales -->
                    <div class="detalle-section">
                        <div class="acciones-adicionales">
                            <button class="btn btn-warning" onclick="generarNotaCreditoDesdeDetalle()">
                                <i class="fas fa-undo"></i>
                                Generar Nota de Crédito
                            </button>
                            <button class="btn btn-danger" onclick="cancelarFacturaDesdeDetalle()">
                                <i class="fas fa-times"></i>
                                Cancelar Factura
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal de Registro de Pago -->
            <div class="modal" id="modalRegistroPago" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Registrar Pago</h3>
                        <button class="btn btn-icon" onclick="cerrarModalPago()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form class="pago-form" id="pagoForm">
                            <div class="form-group">
                                <label for="facturaPago">Factura</label>
                                <input type="text" id="facturaPago" name="facturaPago" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="montoPago">Monto a Pagar</label>
                                <input type="number" id="montoPago" name="montoPago" min="0" step="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="fechaPago">Fecha de Pago</label>
                                <input type="date" id="fechaPago" name="fechaPago" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="metodoPago">Método de Pago</label>
                                <select id="metodoPago" name="metodoPago" required>
                                    <option value="">Seleccionar método</option>
                                    <option value="transferencia">Transferencia Bancaria</option>
                                    <option value="efectivo">Depósito en Efectivo</option>
                                    <option value="stripe">Stripe (Tarjeta)</option>
                                    <option value="tpvclip">TPV Clip</option>
                                    <option value="cheque">Cheque</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="referenciaPago">Referencia de Pago</label>
                                <input type="text" id="referenciaPago" name="referenciaPago" placeholder="No. de Transferencia, ID de Transacción, etc.">
                            </div>
                            
                            <div class="form-group">
                                <label for="notasPago">Notas Internas</label>
                                <textarea id="notasPago" name="notasPago" rows="2" placeholder="Información adicional sobre el pago..."></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="cerrarModalPago()">
                            Cancelar
                        </button>
                        <button class="btn btn-primary" onclick="confirmarRegistroPago()">
                            <i class="fas fa-check"></i>
                            Registrar Pago
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Listas de Precios Section -->
        <section id="listas-precios" class="section">
            <div class="section-header">
                <h1>Gestión de Listas de Precios</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevaListaPrecios">
                        <i class="fas fa-plus"></i>
                        Nueva Lista de Precios
                    </button>
                </div>
            </div>

            <!-- Vista Principal de Listado de Listas de Precios -->
            <div class="listas-precios-container" id="listasPreciosContainer">
                <div class="search-filters">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar por nombre de lista de precios..." id="searchListasPrecios">
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="filterEstadoLista">
                            <option value="">Todos los estados</option>
                            <option value="Activa">Activa</option>
                            <option value="Inactiva">Inactiva</option>
                            <option value="Programada">Programada</option>
                        </select>
                    </div>
                </div>

                <!-- Vista Web - Tabla -->
                <div class="table-container" id="listasPreciosTableContainer">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Nombre de la Lista</th>
                                <th>Descripción</th>
                                <th>Estado</th>
                                <th>Fecha de Creación</th>
                                <th>Última Actualización</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-lista-id="LP001">
                                <td>
                                    <div class="lista-info">
                                        <div class="lista-nombre">Precios Mayoristas</div>
                                        <div class="lista-productos">12 productos</div>
                                    </div>
                                </td>
                                <td>Precios para clientes con volumen de compra alto</td>
                                <td><span class="status active">Activa</span></td>
                                <td>2024-01-15</td>
                                <td>2025-01-20</td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Productos" onclick="verProductosLista('LP001')">
                                            <i class="fas fa-box"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Lista" onclick="editarListaPrecios('LP001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Asignar Clientes" onclick="asignarClientesLista('LP001')">
                                            <i class="fas fa-users"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar Lista" onclick="eliminarListaPrecios('LP001')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-lista-id="LP002">
                                <td>
                                    <div class="lista-info">
                                        <div class="lista-nombre">Precios Minoristas</div>
                                        <div class="lista-productos">8 productos</div>
                                    </div>
                                </td>
                                <td>Precios estándar para público general</td>
                                <td><span class="status active">Activa</span></td>
                                <td>2024-02-10</td>
                                <td>2025-01-18</td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Productos" onclick="verProductosLista('LP002')">
                                            <i class="fas fa-box"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Lista" onclick="editarListaPrecios('LP002')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Asignar Clientes" onclick="asignarClientesLista('LP002')">
                                            <i class="fas fa-users"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar Lista" onclick="eliminarListaPrecios('LP002')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-lista-id="LP003">
                                <td>
                                    <div class="lista-info">
                                        <div class="lista-nombre">Precios VIP</div>
                                        <div class="lista-productos">15 productos</div>
                                    </div>
                                </td>
                                <td>Precios especiales para clientes premium</td>
                                <td><span class="status active">Activa</span></td>
                                <td>2024-03-05</td>
                                <td>2025-01-22</td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Productos" onclick="verProductosLista('LP003')">
                                            <i class="fas fa-box"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Lista" onclick="editarListaPrecios('LP003')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Asignar Clientes" onclick="asignarClientesLista('LP003')">
                                            <i class="fas fa-users"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar Lista" onclick="eliminarListaPrecios('LP003')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-lista-id="LP004">
                                <td>
                                    <div class="lista-info">
                                        <div class="lista-nombre">Precios Temporada Verano 2025</div>
                                        <div class="lista-productos">6 productos</div>
                                    </div>
                                </td>
                                <td>Precios promocionales para temporada de verano</td>
                                <td><span class="status pending">Programada</span></td>
                                <td>2024-12-15</td>
                                <td>2025-01-25</td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Productos" onclick="verProductosLista('LP004')">
                                            <i class="fas fa-box"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Lista" onclick="editarListaPrecios('LP004')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Asignar Clientes" onclick="asignarClientesLista('LP004')">
                                            <i class="fas fa-users"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar Lista" onclick="eliminarListaPrecios('LP004')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-lista-id="LP005">
                                <td>
                                    <div class="lista-info">
                                        <div class="lista-nombre">Precios Distribuidores</div>
                                        <div class="lista-productos">20 productos</div>
                                    </div>
                                </td>
                                <td>Precios especiales para distribuidores autorizados</td>
                                <td><span class="status inactive">Inactiva</span></td>
                                <td>2024-01-20</td>
                                <td>2024-12-10</td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Productos" onclick="verProductosLista('LP005')">
                                            <i class="fas fa-box"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Lista" onclick="editarListaPrecios('LP005')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Asignar Clientes" onclick="asignarClientesLista('LP005')">
                                            <i class="fas fa-users"></i>
                                        </button>
                                        <button class="action-btn" title="Eliminar Lista" onclick="eliminarListaPrecios('LP005')">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Vista Móvil - Tarjetas -->
                <div class="listas-precios-grid" id="listasPreciosGrid" style="display: none;">
                    <div class="lista-precios-card" data-lista-id="LP001">
                        <div class="lista-card-header">
                            <h3>Precios Mayoristas</h3>
                            <span class="status active">Activa</span>
                        </div>
                        <div class="lista-card-content">
                            <p>Precios para clientes con volumen de compra alto</p>
                            <div class="lista-card-details">
                                <span><i class="fas fa-box"></i> 12 productos</span>
                                <span><i class="fas fa-calendar"></i> Creada: 2024-01-15</span>
                                <span><i class="fas fa-clock"></i> Actualizada: 2025-01-20</span>
                            </div>
                        </div>
                        <div class="lista-card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="verProductosLista('LP001')">
                                <i class="fas fa-box"></i> Productos
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="editarListaPrecios('LP001')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="asignarClientesLista('LP001')">
                                <i class="fas fa-users"></i> Clientes
                            </button>
                        </div>
                    </div>

                    <div class="lista-precios-card" data-lista-id="LP002">
                        <div class="lista-card-header">
                            <h3>Precios Minoristas</h3>
                            <span class="status active">Activa</span>
                        </div>
                        <div class="lista-card-content">
                            <p>Precios estándar para público general</p>
                            <div class="lista-card-details">
                                <span><i class="fas fa-box"></i> 8 productos</span>
                                <span><i class="fas fa-calendar"></i> Creada: 2024-02-10</span>
                                <span><i class="fas fa-clock"></i> Actualizada: 2025-01-18</span>
                            </div>
                        </div>
                        <div class="lista-card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="verProductosLista('LP002')">
                                <i class="fas fa-box"></i> Productos
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="editarListaPrecios('LP002')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="asignarClientesLista('LP002')">
                                <i class="fas fa-users"></i> Clientes
                            </button>
                        </div>
                    </div>

                    <div class="lista-precios-card" data-lista-id="LP003">
                        <div class="lista-card-header">
                            <h3>Precios VIP</h3>
                            <span class="status active">Activa</span>
                        </div>
                        <div class="lista-card-content">
                            <p>Precios especiales para clientes premium</p>
                            <div class="lista-card-details">
                                <span><i class="fas fa-box"></i> 15 productos</span>
                                <span><i class="fas fa-calendar"></i> Creada: 2024-03-05</span>
                                <span><i class="fas fa-clock"></i> Actualizada: 2025-01-22</span>
                            </div>
                        </div>
                        <div class="lista-card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="verProductosLista('LP003')">
                                <i class="fas fa-box"></i> Productos
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="editarListaPrecios('LP003')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="asignarClientesLista('LP003')">
                                <i class="fas fa-users"></i> Clientes
                            </button>
                        </div>
                    </div>

                    <div class="lista-precios-card" data-lista-id="LP004">
                        <div class="lista-card-header">
                            <h3>Precios Temporada Verano 2025</h3>
                            <span class="status pending">Programada</span>
                        </div>
                        <div class="lista-card-content">
                            <p>Precios promocionales para temporada de verano</p>
                            <div class="lista-card-details">
                                <span><i class="fas fa-box"></i> 6 productos</span>
                                <span><i class="fas fa-calendar"></i> Creada: 2024-12-15</span>
                                <span><i class="fas fa-clock"></i> Actualizada: 2025-01-25</span>
                            </div>
                        </div>
                        <div class="lista-card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="verProductosLista('LP004')">
                                <i class="fas fa-box"></i> Productos
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="editarListaPrecios('LP004')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="asignarClientesLista('LP004')">
                                <i class="fas fa-users"></i> Clientes
                            </button>
                        </div>
                    </div>

                    <div class="lista-precios-card" data-lista-id="LP005">
                        <div class="lista-card-header">
                            <h3>Precios Distribuidores</h3>
                            <span class="status inactive">Inactiva</span>
                        </div>
                        <div class="lista-card-content">
                            <p>Precios especiales para distribuidores autorizados</p>
                            <div class="lista-card-details">
                                <span><i class="fas fa-box"></i> 20 productos</span>
                                <span><i class="fas fa-calendar"></i> Creada: 2024-01-20</span>
                                <span><i class="fas fa-clock"></i> Actualizada: 2024-12-10</span>
                            </div>
                        </div>
                        <div class="lista-card-actions">
                            <button class="btn btn-secondary btn-sm" onclick="verProductosLista('LP005')">
                                <i class="fas fa-box"></i> Productos
                            </button>
                            <button class="btn btn-primary btn-sm" onclick="editarListaPrecios('LP005')">
                                <i class="fas fa-edit"></i> Editar
                            </button>
                            <button class="btn btn-secondary btn-sm" onclick="asignarClientesLista('LP005')">
                                <i class="fas fa-users"></i> Clientes
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulario de Creación/Edición de Lista de Precios -->
            <div class="formulario-lista-precios" id="formularioListaPrecios" style="display: none;">
                <div class="formulario-header">
                    <button class="btn btn-secondary" onclick="cancelarFormularioLista()">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <h2 id="formularioListaTitulo">Nueva Lista de Precios</h2>
                </div>

                <form class="lista-precios-form" id="listaPreciosForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nombreLista">Nombre de la Lista *</label>
                            <input type="text" id="nombreLista" name="nombreLista" required placeholder="Ej: Precios Mayoristas">
                        </div>
                        
                        <div class="form-group">
                            <label for="descripcionLista">Descripción</label>
                            <textarea id="descripcionLista" name="descripcionLista" rows="3" placeholder="Descripción de la lista de precios..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="estadoLista">Estado</label>
                            <select id="estadoLista" name="estadoLista">
                                <option value="Activa">Activa</option>
                                <option value="Inactiva">Inactiva</option>
                                <option value="Programada">Programada</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="fechaInicioLista">Fecha de Inicio de Vigencia</label>
                            <input type="date" id="fechaInicioLista" name="fechaInicioLista">
                        </div>
                        
                        <div class="form-group">
                            <label for="fechaFinLista">Fecha de Fin de Vigencia</label>
                            <input type="date" id="fechaFinLista" name="fechaFinLista">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="cancelarFormularioLista()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Lista
                        </button>
                    </div>
                </form>
            </div>

            <!-- Vista de Detalle de Lista de Precios (Productos) -->
            <div class="detalle-lista-precios" id="detalleListaPrecios" style="display: none;">
                <div class="detalle-header">
                    <button class="btn btn-secondary" onclick="volverAListasPrecios()">
                        <i class="fas fa-arrow-left"></i>
                        Volver a Listas
                    </button>
                    <h2 id="detalleListaNombre">Lista de Precios: Precios Mayoristas</h2>
                    <div class="detalle-actions">
                        <button class="btn btn-secondary" onclick="importarPreciosCSV()">
                            <i class="fas fa-upload"></i>
                            Importar Precios (CSV)
                        </button>
                        <button class="btn btn-secondary" onclick="exportarPreciosCSV()">
                            <i class="fas fa-download"></i>
                            Exportar Precios (CSV)
                        </button>
                        <button class="btn btn-primary" onclick="guardarCambiosPrecios()">
                            <i class="fas fa-save"></i>
                            Guardar Cambios
                        </button>
                    </div>
                </div>

                <div class="detalle-content">
                    <!-- Sección 1: Búsqueda y Adición de Productos -->
                    <div class="detalle-section">
                        <h3>Agregar Producto a la Lista</h3>
                        <div class="producto-busqueda-container">
                            <div class="form-group">
                                <label for="productoBusqueda">Buscar Producto</label>
                                <div class="producto-search-container">
                                    <input type="text" id="productoBusqueda" name="productoBusqueda" placeholder="Buscar producto...">
                                    <div class="producto-suggestions" id="productoSuggestionsLista" style="display: none;">
                                        <!-- Las sugerencias se cargarán dinámicamente -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="producto-seleccionado-lista" id="productoSeleccionadoLista" style="display: none;">
                                <div class="producto-info-lista">
                                    <h5 id="productoNombreLista">Nombre del Producto</h5>
                                    <div class="producto-details-lista">
                                        <span>SKU: <strong id="productoSkuLista">SKU-001</strong></span>
                                        <span>Precio Base: <strong id="productoPrecioBaseLista">€0.00</strong></span>
                                    </div>
                                </div>
                                <div class="producto-precio-lista">
                                    <label for="productoPrecioLista">Precio para esta Lista:</label>
                                    <input type="number" id="productoPrecioLista" name="productoPrecioLista" min="0" step="0.01" placeholder="0.00">
                                    <button type="button" class="btn btn-primary" onclick="agregarProductoALista()">
                                        <i class="fas fa-plus"></i> Agregar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 2: Actualización Masiva -->
                    <div class="detalle-section">
                        <h3>Actualización Masiva de Precios</h3>
                        <div class="actualizacion-masiva">
                            <div class="form-group">
                                <label for="porcentajeCambio">Porcentaje de Cambio (%)</label>
                                <div class="porcentaje-container">
                                    <input type="number" id="porcentajeCambio" name="porcentajeCambio" min="-100" max="100" step="0.1" placeholder="0">
                                    <select id="tipoCambio" name="tipoCambio">
                                        <option value="incremento">Incremento</option>
                                        <option value="decremento">Decremento</option>
                                    </select>
                                    <button type="button" class="btn btn-secondary" onclick="aplicarCambioMasivo()">
                                        <i class="fas fa-calculator"></i> Aplicar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 3: Productos en esta Lista -->
                    <div class="detalle-section">
                        <h3>Productos en esta Lista de Precios</h3>
                        <div class="table-container">
                            <table class="data-table" id="productosListaTable">
                                <thead>
                                    <tr>
                                        <th>SKU</th>
                                        <th>Nombre del Producto</th>
                                        <th>Precio Base</th>
                                        <th>Precio en esta Lista</th>
                                        <th>Diferencia</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="productosListaTableBody">
                                    <tr data-producto-id="PROD001">
                                        <td>PROD001</td>
                                        <td>Laptop Ultraligera X200</td>
                                        <td>€1,200.00</td>
                                        <td>
                                            <input type="number" class="precio-lista-input" value="1,080.00" min="0" step="0.01" onchange="actualizarPrecioLista(this, 'PROD001')">
                                        </td>
                                        <td><span class="diferencia positiva">-€120.00 (-10%)</span></td>
                                        <td>
                                            <button class="action-btn" title="Eliminar de Lista" onclick="eliminarProductoDeLista('PROD001')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr data-producto-id="PROD002">
                                        <td>PROD002</td>
                                        <td>Monitor Curvo 27"</td>
                                        <td>€350.00</td>
                                        <td>
                                            <input type="number" class="precio-lista-input" value="315.00" min="0" step="0.01" onchange="actualizarPrecioLista(this, 'PROD002')">
                                        </td>
                                        <td><span class="diferencia positiva">-€35.00 (-10%)</span></td>
                                        <td>
                                            <button class="action-btn" title="Eliminar de Lista" onclick="eliminarProductoDeLista('PROD002')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr data-producto-id="PROD003">
                                        <td>PROD003</td>
                                        <td>Teclado Mecánico RGB</td>
                                        <td>€120.00</td>
                                        <td>
                                            <input type="number" class="precio-lista-input" value="108.00" min="0" step="0.01" onchange="actualizarPrecioLista(this, 'PROD003')">
                                        </td>
                                        <td><span class="diferencia positiva">-€12.00 (-10%)</span></td>
                                        <td>
                                            <button class="action-btn" title="Eliminar de Lista" onclick="eliminarProductoDeLista('PROD003')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr data-producto-id="PROD004">
                                        <td>PROD004</td>
                                        <td>Mouse Gaming Pro</td>
                                        <td>€85.00</td>
                                        <td>
                                            <input type="number" class="precio-lista-input" value="76.50" min="0" step="0.01" onchange="actualizarPrecioLista(this, 'PROD004')">
                                        </td>
                                        <td><span class="diferencia positiva">-€8.50 (-10%)</span></td>
                                        <td>
                                            <button class="action-btn" title="Eliminar de Lista" onclick="eliminarProductoDeLista('PROD004')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr data-producto-id="PROD005">
                                        <td>PROD005</td>
                                        <td>Auriculares Bluetooth</td>
                                        <td>€95.00</td>
                                        <td>
                                            <input type="number" class="precio-lista-input" value="85.50" min="0" step="0.01" onchange="actualizarPrecioLista(this, 'PROD005')">
                                        </td>
                                        <td><span class="diferencia positiva">-€9.50 (-10%)</span></td>
                                        <td>
                                            <button class="action-btn" title="Eliminar de Lista" onclick="eliminarProductoDeLista('PROD005')">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal de Asignación de Clientes -->
            <div class="modal" id="modalAsignarClientes">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Asignar Clientes a Lista de Precios</h3>
                        <button class="modal-close" onclick="cerrarModalAsignarClientes()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="cliente-busqueda-container">
                            <div class="form-group">
                                <label for="clienteBusquedaAsignar">Buscar Cliente</label>
                                <div class="cliente-search-container">
                                    <input type="text" id="clienteBusquedaAsignar" name="clienteBusquedaAsignar" placeholder="Buscar cliente...">
                                    <div class="cliente-suggestions" id="clienteSuggestionsAsignar" style="display: none;">
                                        <!-- Las sugerencias se cargarán dinámicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="clientes-asignados">
                            <h4>Clientes Asignados a esta Lista</h4>
                            <div class="clientes-lista-asignados" id="clientesListaAsignados">
                                <div class="cliente-asignado-item">
                                    <div class="cliente-info-asignado">
                                        <h5>Distribuidora El Sol S.A.</h5>
                                        <p>C001 | Juan Pérez</p>
                                    </div>
                                    <button class="btn btn-danger btn-sm" onclick="quitarClienteAsignado('C001')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="cliente-asignado-item">
                                    <div class="cliente-info-asignado">
                                        <h5>Panadería La Espiga</h5>
                                        <p>C002 | María López</p>
                                    </div>
                                    <button class="btn btn-danger btn-sm" onclick="quitarClienteAsignado('C002')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="cliente-asignado-item">
                                    <div class="cliente-info-asignado">
                                        <h5>Ferretería Central</h5>
                                        <p>C003 | Carlos Ruiz</p>
                                    </div>
                                    <button class="btn btn-danger btn-sm" onclick="quitarClienteAsignado('C003')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="cerrarModalAsignarClientes()">Cancelar</button>
                        <button class="btn btn-primary" onclick="guardarAsignacionesClientes()">Guardar Asignaciones</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Equipo Section -->
        <section id="equipo" class="section">
            <div class="section-header">
                <h1>Gestión del Equipo</h1>
                <div class="section-actions">
                    <button class="btn btn-primary">
                        <i class="fas fa-plus"></i>
                        Nuevo Usuario
                    </button>
                </div>
            </div>

            <div class="team-grid">
                <div class="team-card">
                    <div class="team-avatar">
                        <img src="https://via.placeholder.com/80x80/4F46E5/FFFFFF?text=J" alt="Usuario">
                        <span class="status-indicator online"></span>
                    </div>
                    <div class="team-info">
                        <h3>Juan Pérez</h3>
                        <p class="team-role">Vendedor Senior</p>
                        <p class="team-email">juan.perez@trigal.com</p>
                        <div class="team-stats">
                            <div class="stat">
                                <span class="stat-label">Ventas Mes</span>
                                <span class="stat-value">€12,450</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Clientes</span>
                                <span class="stat-value">24</span>
                            </div>
                        </div>
                    </div>
                    <div class="team-actions">
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                        <button class="action-btn"><i class="fas fa-chart-line"></i></button>
                    </div>
                </div>

                <div class="team-card">
                    <div class="team-avatar">
                        <img src="https://via.placeholder.com/80x80/10B981/FFFFFF?text=M" alt="Usuario">
                        <span class="status-indicator online"></span>
                    </div>
                    <div class="team-info">
                        <h3>María García</h3>
                        <p class="team-role">Vendedora</p>
                        <p class="team-email">maria.garcia@trigal.com</p>
                        <div class="team-stats">
                            <div class="stat">
                                <span class="stat-label">Ventas Mes</span>
                                <span class="stat-value">€8,920</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Clientes</span>
                                <span class="stat-value">18</span>
                            </div>
                        </div>
                    </div>
                    <div class="team-actions">
                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                        <button class="action-btn"><i class="fas fa-chart-line"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gestión de Productos e Inventario Section -->
        <section id="productos" class="section">
            <div class="section-header">
                <h1>Gestión de Productos e Inventario</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="btnNuevoProducto">
                        <i class="fas fa-plus"></i>
                        Agregar Nuevo Producto
                    </button>
                    <button class="btn btn-secondary" id="btnExportarInventario">
                        <i class="fas fa-download"></i>
                        Exportar Inventario
                    </button>
                </div>
            </div>

            <!-- Vista Principal de Listado de Productos -->
            <div class="productos-listado" id="productosListado">
                <div class="search-filters">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Buscar por SKU o Nombre del Producto..." id="searchProductos">
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="filterCategoriaProducto">
                            <option value="">Todas las categorías</option>
                            <option value="Electrónica">Electrónica</option>
                            <option value="Línea Blanca">Línea Blanca</option>
                            <option value="Hogar">Hogar</option>
                            <option value="Alimentos">Alimentos</option>
                            <option value="Servicios">Servicios</option>
                        </select>
                        <select class="filter-select" id="filterStockProducto">
                            <option value="">Todos los estados</option>
                            <option value="en_stock">En Stock</option>
                            <option value="stock_bajo">Stock Bajo</option>
                            <option value="agotado">Agotado</option>
                        </select>
                    </div>
                </div>

                <!-- Vista Web - Tabla -->
                <div class="table-container" id="productosTableContainer">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Imagen</th>
                                <th>SKU</th>
                                <th>Nombre del Producto</th>
                                <th>Categoría</th>
                                <th>Precio de Venta</th>
                                <th>Stock Disponible</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-producto-id="PROD001">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/4F46E5/FFFFFF?text=L" alt="Laptop">
                                    </div>
                                </td>
                                <td><span class="sku">PROD001</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Laptop Ultraligera X200</div>
                                        <div class="producto-marca">TechCorp</div>
                                    </div>
                                </td>
                                <td>Electrónica</td>
                                <td>€1,200.00</td>
                                <td>
                                    <span class="stock-disponible">50</span>
                                    <span class="stock-unidad">unidades</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD001')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD001')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD001')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD002">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/10B981/FFFFFF?text=M" alt="Monitor">
                                    </div>
                                </td>
                                <td><span class="sku">PROD002</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Monitor Curvo 27''</div>
                                        <div class="producto-marca">TechCorp</div>
                                    </div>
                                </td>
                                <td>Electrónica</td>
                                <td>€350.00</td>
                                <td>
                                    <span class="stock-disponible">120</span>
                                    <span class="stock-unidad">unidades</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD002')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD002')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD002')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD003">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/F59E0B/FFFFFF?text=T" alt="Teclado">
                                    </div>
                                </td>
                                <td><span class="sku">PROD003</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Teclado Mecánico RGB</div>
                                        <div class="producto-marca">TechCorp</div>
                                    </div>
                                </td>
                                <td>Periféricos</td>
                                <td>€80.00</td>
                                <td>
                                    <span class="stock-disponible">75</span>
                                    <span class="stock-unidad">unidades</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD003')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD003')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD003')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD004">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/EF4444/FFFFFF?text=R" alt="Refrigerador">
                                    </div>
                                </td>
                                <td><span class="sku">PROD004</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Refrigerador Side by Side</div>
                                        <div class="producto-marca">HomeGoods</div>
                                    </div>
                                </td>
                                <td>Línea Blanca</td>
                                <td>€850.00</td>
                                <td>
                                    <span class="stock-disponible">8</span>
                                    <span class="stock-unidad">unidades</span>
                                </td>
                                <td><span class="status stock-bajo">Stock Bajo</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD004')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD004')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD004')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD005">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/8B5CF6/FFFFFF?text=C" alt="Café">
                                    </div>
                                </td>
                                <td><span class="sku">PROD005</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Café Premium Molido</div>
                                        <div class="producto-marca">CaféExpress</div>
                                    </div>
                                </td>
                                <td>Alimentos</td>
                                <td>€12.50</td>
                                <td>
                                    <span class="stock-disponible">0</span>
                                    <span class="stock-unidad">kg</span>
                                </td>
                                <td><span class="status stock-agotado">Agotado</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD005')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD005')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD005')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD006">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/06B6D4/FFFFFF?text=S" alt="Sofá">
                                    </div>
                                </td>
                                <td><span class="sku">PROD006</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Sofá 3 Plazas Moderno</div>
                                        <div class="producto-marca">HomeGoods</div>
                                    </div>
                                </td>
                                <td>Hogar</td>
                                <td>€450.00</td>
                                <td>
                                    <span class="stock-disponible">15</span>
                                    <span class="stock-unidad">unidades</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD006')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD006')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD006')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD007">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/84CC16/FFFFFF?text=A" alt="Aceite">
                                    </div>
                                </td>
                                <td><span class="sku">PROD007</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Aceite de Oliva Extra Virgen</div>
                                        <div class="producto-marca">OliveCorp</div>
                                    </div>
                                </td>
                                <td>Alimentos</td>
                                <td>€8.75</td>
                                <td>
                                    <span class="stock-disponible">200</span>
                                    <span class="stock-unidad">L</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD007')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD007')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD007')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr data-producto-id="PROD008">
                                <td>
                                    <div class="producto-imagen">
                                        <img src="https://via.placeholder.com/48x48/F97316/FFFFFF?text=H" alt="Harina">
                                    </div>
                                </td>
                                <td><span class="sku">PROD008</span></td>
                                <td>
                                    <div class="producto-info">
                                        <div class="producto-nombre">Harina de Trigo Premium</div>
                                        <div class="producto-marca">MolinosCorp</div>
                                    </div>
                                </td>
                                <td>Alimentos</td>
                                <td>€2.50</td>
                                <td>
                                    <span class="stock-disponible">500</span>
                                    <span class="stock-unidad">kg</span>
                                </td>
                                <td><span class="status stock-ok">En Stock</span></td>
                                <td>
                                    <div class="actions">
                                        <button class="action-btn" title="Ver Detalles" onclick="verDetalleProducto('PROD008')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="action-btn" title="Editar Producto" onclick="editarProducto('PROD008')">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="action-btn" title="Ver Movimientos" onclick="verMovimientosInventario('PROD008')">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Vista Móvil - Tarjetas -->
                <div class="productos-grid" id="productosGridContainer" style="display: none;">
                    <div class="producto-card" data-producto-id="PROD001">
                        <div class="producto-card-imagen">
                            <img src="https://via.placeholder.com/80x80/4F46E5/FFFFFF?text=L" alt="Laptop">
                        </div>
                        <div class="producto-card-info">
                            <h3>Laptop Ultraligera X200</h3>
                            <p class="producto-sku">PROD001</p>
                            <p class="producto-marca">TechCorp</p>
                            <div class="producto-precio">€1,200.00</div>
                            <div class="producto-stock">
                                <span class="stock-cantidad">50</span>
                                <span class="stock-unidad">unidades</span>
                            </div>
                            <div class="producto-estado">
                                <span class="status stock-ok">En Stock</span>
                            </div>
                        </div>
                        <div class="producto-card-actions">
                            <button class="action-btn" onclick="verDetalleProducto('PROD001')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editarProducto('PROD001')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="verMovimientosInventario('PROD001')">
                                <i class="fas fa-chart-line"></i>
                            </button>
                        </div>
                    </div>
                    <!-- Más tarjetas se generarán dinámicamente -->
                </div>
            </div>

            <!-- Formulario de Creación/Edición de Producto (Oculto por defecto) -->
            <div class="formulario-producto" id="formularioProducto" style="display: none;">
                <div class="formulario-header">
                    <button class="btn btn-secondary" onclick="cancelarFormularioProducto()">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <h2 id="formularioProductoTitulo">Nuevo Producto</h2>
                </div>

                <form class="producto-form" id="productoForm">
                    <div class="form-section">
                        <h3>Información Básica del Producto</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nombreProducto">Nombre del Producto *</label>
                                <input type="text" id="nombreProducto" name="nombreProducto" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="skuProducto">SKU</label>
                                <input type="text" id="skuProducto" name="skuProducto" placeholder="Se generará automáticamente">
                            </div>
                            
                            <div class="form-group">
                                <label for="categoriaProducto">Categoría *</label>
                                <select id="categoriaProducto" name="categoriaProducto" required>
                                    <option value="">Seleccionar categoría</option>
                                    <option value="Electrónica">Electrónica</option>
                                    <option value="Línea Blanca">Línea Blanca</option>
                                    <option value="Hogar">Hogar</option>
                                    <option value="Alimentos">Alimentos</option>
                                    <option value="Servicios">Servicios</option>
                                    <option value="Periféricos">Periféricos</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="marcaProducto">Marca</label>
                                <input type="text" id="marcaProducto" name="marcaProducto">
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="descripcionProducto">Descripción</label>
                                <textarea id="descripcionProducto" name="descripcionProducto" rows="4" placeholder="Descripción detallada del producto..."></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Imagen del Producto</h3>
                        <div class="imagen-producto-container">
                            <div class="imagen-preview" id="imagenPreview">
                                <i class="fas fa-image"></i>
                                <p>Sin imagen seleccionada</p>
                            </div>
                            <div class="imagen-actions">
                                <button type="button" class="btn btn-secondary" onclick="document.getElementById('imagenProducto').click()">
                                    <i class="fas fa-upload"></i> Subir Imagen
                                </button>
                                <input type="file" id="imagenProducto" name="imagenProducto" accept="image/*" style="display: none;">
                                <button type="button" class="btn btn-danger" onclick="eliminarImagenProducto()" id="btnEliminarImagen" style="display: none;">
                                    <i class="fas fa-trash"></i> Eliminar
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Precios y Costos</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="precioCompraProducto">Precio de Compra *</label>
                                <input type="number" id="precioCompraProducto" name="precioCompraProducto" min="0" step="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="precioVentaProducto">Precio de Venta *</label>
                                <input type="number" id="precioVentaProducto" name="precioVentaProducto" min="0" step="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="unidadMedidaProducto">Unidad de Medida</label>
                                <select id="unidadMedidaProducto" name="unidadMedidaProducto">
                                    <option value="unidad">Unidad</option>
                                    <option value="kg">Kilogramo (Kg)</option>
                                    <option value="litro">Litro (L)</option>
                                    <option value="metro">Metro (m)</option>
                                    <option value="par">Par</option>
                                    <option value="caja">Caja</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Gestión de Inventario</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="stockInicialProducto">Stock Inicial</label>
                                <input type="number" id="stockInicialProducto" name="stockInicialProducto" min="0" value="0">
                            </div>
                            
                            <div class="form-group">
                                <label for="stockMinimoProducto">Stock Mínimo de Alerta *</label>
                                <input type="number" id="stockMinimoProducto" name="stockMinimoProducto" min="0" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="estadoProducto">Estado</label>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="estadoProducto" name="estadoProducto" checked>
                                    <label for="estadoProducto">
                                        <span class="toggle-label">Activo</span>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Atributos Opcionales</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="colorProducto">Color</label>
                                <select id="colorProducto" name="colorProducto">
                                    <option value="">Sin especificar</option>
                                    <option value="Negro">Negro</option>
                                    <option value="Blanco">Blanco</option>
                                    <option value="Gris">Gris</option>
                                    <option value="Azul">Azul</option>
                                    <option value="Rojo">Rojo</option>
                                    <option value="Verde">Verde</option>
                                    <option value="Amarillo">Amarillo</option>
                                    <option value="Otro">Otro</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="tamanoProducto">Tamaño</label>
                                <select id="tamanoProducto" name="tamanoProducto">
                                    <option value="">Sin especificar</option>
                                    <option value="Pequeño">Pequeño</option>
                                    <option value="Mediano">Mediano</option>
                                    <option value="Grande">Grande</option>
                                    <option value="Extra Grande">Extra Grande</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="materialProducto">Material</label>
                                <input type="text" id="materialProducto" name="materialProducto" placeholder="Ej: Plástico, Metal, Madera...">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="cancelarFormularioProducto()">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Guardar Producto
                        </button>
                    </div>
                </form>
            </div>

            <!-- Vista de Detalle de Producto (Oculta por defecto) -->
            <div class="detalle-producto" id="detalleProducto" style="display: none;">
                <div class="detalle-header">
                    <button class="btn btn-secondary" onclick="volverAListadoProductos()">
                        <i class="fas fa-arrow-left"></i>
                        Volver al Listado
                    </button>
                    <h2 id="detalleProductoTitulo">Detalle del Producto</h2>
                    <div class="detalle-actions">
                        <button class="btn btn-secondary" onclick="editarProductoDesdeDetalle()">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="btn btn-primary" onclick="agregarMovimientoInventario()">
                            <i class="fas fa-plus"></i> Agregar Movimiento
                        </button>
                    </div>
                </div>

                <div class="detalle-content">
                    <!-- Sección 1: Información General del Producto -->
                    <div class="detalle-section">
                        <div class="producto-detalle-header">
                            <div class="producto-imagen-grande">
                                <img src="https://via.placeholder.com/200x200/4F46E5/FFFFFF?text=L" alt="Producto" id="detalleImagenProducto">
                            </div>
                            <div class="producto-info-detalle">
                                <h3 id="detalleNombreProducto">Laptop Ultraligera X200</h3>
                                <p class="producto-sku-detalle" id="detalleSkuProducto">SKU: PROD001</p>
                                <p class="producto-marca-detalle" id="detalleMarcaProducto">Marca: TechCorp</p>
                                <p class="producto-categoria-detalle" id="detalleCategoriaProducto">Categoría: Electrónica</p>
                                <div class="producto-precios">
                                    <div class="precio-item">
                                        <label>Precio de Venta:</label>
                                        <span id="detallePrecioVentaProducto">€1,200.00</span>
                                    </div>
                                    <div class="precio-item">
                                        <label>Precio de Compra:</label>
                                        <span id="detallePrecioCompraProducto">€900.00</span>
                                    </div>
                                </div>
                                <div class="producto-estado-detalle">
                                    <label>Estado:</label>
                                    <span id="detalleEstadoProducto" class="status active">Activo</span>
                                </div>
                            </div>
                        </div>
                        <div class="producto-descripcion-detalle">
                            <h4>Descripción</h4>
                            <p id="detalleDescripcionProducto">Laptop ultraligera con procesador de última generación, 16GB de RAM y 512GB de almacenamiento SSD. Ideal para profesionales y estudiantes que requieren portabilidad y rendimiento.</p>
                        </div>
                    </div>

                    <!-- Sección 2: Estado Actual del Inventario -->
                    <div class="detalle-section">
                        <h3>Estado Actual del Inventario</h3>
                        <div class="inventario-estado">
                            <div class="stock-actual">
                                <div class="stock-numero" id="detalleStockActual">50</div>
                                <div class="stock-unidad" id="detalleStockUnidad">Unidades</div>
                                <div class="stock-disponibilidad" id="detalleStockDisponibilidad">
                                    <span class="status stock-ok">En Stock</span>
                                </div>
                            </div>
                            <div class="stock-info">
                                <div class="stock-item">
                                    <label>Stock Mínimo de Alerta:</label>
                                    <span id="detalleStockMinimo">10 unidades</span>
                                </div>
                                <div class="stock-item">
                                    <label>Próxima Entrada:</label>
                                    <span id="detalleProximaEntrada">20 unidades el 2025-08-01</span>
                                </div>
                                <div class="stock-item">
                                    <label>Última Actualización:</label>
                                    <span id="detalleUltimaActualizacion">2025-01-25 14:30</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sección 3: Movimientos de Inventario -->
                    <div class="detalle-section">
                        <h3>Movimientos de Inventario</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>Tipo de Movimiento</th>
                                        <th>Cantidad</th>
                                        <th>Referencia</th>
                                        <th>Usuario</th>
                                    </tr>
                                </thead>
                                <tbody id="detalleMovimientosTable">
                                    <tr>
                                        <td>2025-01-25</td>
                                        <td><span class="movimiento-tipo entrada">Entrada</span></td>
                                        <td class="cantidad-positiva">+20</td>
                                        <td>Compra C001</td>
                                        <td>Juan Pérez</td>
                                    </tr>
                                    <tr>
                                        <td>2025-01-24</td>
                                        <td><span class="movimiento-tipo salida">Salida (Venta)</span></td>
                                        <td class="cantidad-negativa">-5</td>
                                        <td>Pedido P0010</td>
                                        <td>María López</td>
                                    </tr>
                                    <tr>
                                        <td>2025-01-23</td>
                                        <td><span class="movimiento-tipo ajuste">Ajuste</span></td>
                                        <td class="cantidad-positiva">+2</td>
                                        <td>Ajuste Inventario</td>
                                        <td>Carlos Ruiz</td>
                                    </tr>
                                    <tr>
                                        <td>2025-01-22</td>
                                        <td><span class="movimiento-tipo salida">Salida (Venta)</span></td>
                                        <td class="cantidad-negativa">-3</td>
                                        <td>Pedido P0009</td>
                                        <td>Ana García</td>
                                    </tr>
                                    <tr>
                                        <td>2025-01-21</td>
                                        <td><span class="movimiento-tipo entrada">Entrada</span></td>
                                        <td class="cantidad-positiva">+30</td>
                                        <td>Compra C002</td>
                                        <td>Juan Pérez</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal de Movimiento de Inventario (Oculto por defecto) -->
            <div class="modal" id="modalMovimientoInventario" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Agregar Movimiento de Inventario</h3>
                        <button class="btn btn-secondary" onclick="cerrarModalMovimientoInventario()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="tipoMovimientoInventario">Tipo de Movimiento *</label>
                            <select id="tipoMovimientoInventario" name="tipoMovimientoInventario" required>
                                <option value="">Seleccionar tipo</option>
                                <option value="entrada">Entrada</option>
                                <option value="salida">Salida (Venta)</option>
                                <option value="ajuste">Ajuste</option>
                                <option value="devolucion">Devolución</option>
                                <option value="merma">Merma</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cantidadMovimientoInventario">Cantidad *</label>
                            <input type="number" id="cantidadMovimientoInventario" name="cantidadMovimientoInventario" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="referenciaMovimientoInventario">Referencia</label>
                            <input type="text" id="referenciaMovimientoInventario" name="referenciaMovimientoInventario" placeholder="Ej: Pedido P0010, Compra C001, Ajuste...">
                        </div>
                        <div class="form-group">
                            <label for="notasMovimientoInventario">Notas</label>
                            <textarea id="notasMovimientoInventario" name="notasMovimientoInventario" rows="3" placeholder="Notas adicionales sobre el movimiento..."></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="cerrarModalMovimientoInventario()">Cancelar</button>
                        <button class="btn btn-primary" onclick="confirmarMovimientoInventario()">Confirmar Movimiento</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Notificaciones Section -->
        <section id="notificaciones" class="section">
            <div class="section-header">
                <h1>Notificaciones y Alertas</h1>
                <p>Gestiona todas tus notificaciones y configuraciones de alertas</p>
            </div>

            <!-- Filtros y Opciones -->
            <div class="notifications-filters">
                <div class="filters-row">
                    <div class="filter-group">
                        <label for="filtroEstado">Estado:</label>
                        <select id="filtroEstado" onchange="filtrarNotificaciones()">
                            <option value="todas">Todas</option>
                            <option value="no-leidas">No Leídas</option>
                            <option value="leidas">Leídas</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filtroTipo">Tipo:</label>
                        <select id="filtroTipo" onchange="filtrarNotificaciones()">
                            <option value="todas">Todas</option>
                            <option value="inventario">Inventario</option>
                            <option value="pedidos">Pedidos</option>
                            <option value="clientes">Clientes</option>
                            <option value="rutas">Rutas</option>
                            <option value="sistema">Sistema</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="buscarNotificaciones">Buscar:</label>
                        <input type="text" id="buscarNotificaciones" placeholder="Buscar en notificaciones..." onkeyup="filtrarNotificaciones()">
                    </div>
                </div>
                <div class="filters-actions">
                    <button class="btn btn-secondary" onclick="marcarTodasComoLeidas()">
                        <i class="fas fa-check-double"></i>
                        Marcar todas como leídas
                    </button>
                    <button class="btn btn-danger" onclick="eliminarNotificacionesSeleccionadas()">
                        <i class="fas fa-trash"></i>
                        Eliminar seleccionadas
                    </button>
                </div>
            </div>

            <!-- Lista de Notificaciones -->
            <div class="notifications-container-full">
                <div class="notifications-list-full" id="notificationsListFull">
                    <!-- Las notificaciones se cargarán dinámicamente -->
                </div>
            </div>

            <!-- Configuración de Notificaciones -->
            <div class="notifications-settings">
                <div class="settings-header">
                    <h2>Configuración de Notificaciones</h2>
                    <p>Personaliza qué notificaciones deseas recibir y por qué medio</p>
                </div>
                
                <div class="settings-content">
                    <div class="settings-section">
                        <h3>Tipos de Notificaciones</h3>
                        
                        <div class="settings-group">
                            <h4>📦 Inventario</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifStockBajo" checked>
                                    <span class="checkmark"></span>
                                    Stock bajo
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifProductoAgotado" checked>
                                    <span class="checkmark"></span>
                                    Producto agotado
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifReabastecimiento" checked>
                                    <span class="checkmark"></span>
                                    Pedido de reabastecimiento
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h4>🛒 Pedidos</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifNuevoPedido" checked>
                                    <span class="checkmark"></span>
                                    Nuevo pedido
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifPedidoEntregado" checked>
                                    <span class="checkmark"></span>
                                    Pedido entregado
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifPedidoCancelado" checked>
                                    <span class="checkmark"></span>
                                    Pedido cancelado
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h4>👥 Clientes</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifNuevoCliente" checked>
                                    <span class="checkmark"></span>
                                    Nuevo cliente registrado
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifCambioCliente" checked>
                                    <span class="checkmark"></span>
                                    Cambio de datos de cliente
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h4>🗺️ Rutas</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifRutaAsignada" checked>
                                    <span class="checkmark"></span>
                                    Ruta asignada
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifVisitaPendiente" checked>
                                    <span class="checkmark"></span>
                                    Visitas pendientes
                                </label>
                            </div>
                        </div>
                        
                        <div class="settings-group">
                            <h4>⚙️ Sistema</h4>
                            <div class="checkbox-group">
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifActualizacion" checked>
                                    <span class="checkmark"></span>
                                    Actualizaciones del sistema
                                </label>
                                <label class="checkbox-item">
                                    <input type="checkbox" id="notifMantenimiento" checked>
                                    <span class="checkmark"></span>
                                    Mantenimiento programado
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Medios de Recepción</h3>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" id="notifAppMovil" checked>
                                <span class="checkmark"></span>
                                App Móvil
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="notifEmail" checked>
                                <span class="checkmark"></span>
                                Email
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" id="notifCRM" checked>
                                <span class="checkmark"></span>
                                Notificación interna en CRM
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button class="btn btn-primary" onclick="guardarConfiguracionNotificaciones()">
                        <i class="fas fa-save"></i>
                        Guardar Configuración
                    </button>
                    <button class="btn btn-secondary" onclick="restaurarConfiguracionDefault()">
                        <i class="fas fa-undo"></i>
                        Restaurar Valores por Defecto
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Procesar Pago</h2>
                <button class="modal-close" id="closePaymentModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="payment-summary">
                    <h3>Resumen del Pedido #ORD-001</h3>
                    <div class="payment-details">
                        <div class="payment-item">
                            <span>Subtotal:</span>
                            <span>€1,150.00</span>
                        </div>
                        <div class="payment-item">
                            <span>IVA (21%):</span>
                            <span>€241.50</span>
                        </div>
                        <div class="payment-item total">
                            <span>Total:</span>
                            <span>€1,391.50</span>
                        </div>
                    </div>
                </div>
                <div class="payment-methods">
                    <h3>Métodos de Pago</h3>
                    <div class="payment-options">
                        <button class="payment-option">
                            <i class="fab fa-stripe"></i>
                            <span>Pagar con Stripe</span>
                        </button>
                        <button class="payment-option">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Escanear Pago (TPV Clip)</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 